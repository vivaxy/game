{"version":3,"sources":["webpack:///js/index.js","webpack:///./~/bezier-easing/src/index.js","webpack:///./src/styles/index.pcss","webpack:///./~/eventemitter3/index.js","webpack:///./src/entries/index.js","webpack:///./src/main/canvas.js","webpack:///./src/main/index.js","webpack:///./src/main/input.js","webpack:///./src/main/puzzle.js","webpack:///./src/main/puzzle/buttons.js","webpack:///./src/main/puzzle/grid.js","webpack:///./src/main/puzzle/stepper.js","webpack:///./src/main/puzzle/tile.js","webpack:///./src/main/puzzle/timer.js","webpack:///./src/styles/index.pcss?269b"],"names":["webpackJsonp","./node_modules/bezier-easing/src/index.js","module","exports","__webpack_require__","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentX","currentT","i","Math","abs","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","newtonRaphsonIterate","aGuessT","NEWTON_ITERATIONS","currentSlope","NEWTON_MIN_SLOPE","kSplineTableSize","kSampleStepSize","float32ArraySupported","Float32Array","mY1","mY2","getTForX","intervalStart","currentSample","lastSample","sampleValues","dist","guessForT","initialSlope","Error","Array","x","./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss","push","./node_modules/eventemitter3/index.js","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","prefix","_events","_eventsCount","clearEvent","EventEmitter","has","Object","prototype","hasOwnProperty","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","l","length","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","./src/entries/index.js","./src/main/canvas.js","_classCallCheck","instance","Constructor","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","_configs","Canvas","canvas","document","querySelector","ctx","getContext","width","canvasWidth","height","canvasHeight","styles","window","innerWidth","innerHeight","top","left","updatePosition","keys","forEach","styleKey","style","clearRect","default","./src/main/index.js","_interopRequireDefault","obj","__esModule","_canvas","_canvas2","_puzzle","_puzzle2","_input","_input2","Game","_ref","_ref$row","row","_ref$col","col","input","getCanvas","puzzle","getCtx","body","addEventListener","browserEvents","TOUCH_MOVE","e","preventDefault","passive","RESIZE_CANVAS","clear","render","update","_this","requestAnimationFrame","loop","scramble","puzzleStatus","puzzleStatusCodes","READY","start","./src/main/input.js","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","constructor","setPrototypeOf","_eventemitter","getCoords","changedTouches","mapPointToCanvas","clientX","offsetLeft","y","clientY","offsetTop","Input","_EventEmitter","getPrototypeOf","point","resetPoint","move","pointX","pointY","tryMove","end","invalidPoint","RESET_SPACE_TILE","click","CLICK","resize","orientationChange","initialize","element","TOUCH_START","TOUCH_END","TOUCH_CANCEL","RESIZE","ORIENTATION_CHANGE","xMovement","startPointX","yMovement","startPointY","directions","RIGHT","LEFT","DOWN","UP","deltaX","deltaY","direction","getDirection","TRY_MOVE","_ref2","_ref2$x","_ref2$y","_ref3","_ref4","./src/main/puzzle.js","_asyncToGenerator","gen","Promise","resolve","reject","step","arg","info","error","done","then","err","_toConsumableArray","arr","isArray","arr2","from","_fingerprintjs","_fingerprintjs2","_grid","_grid2","_tile","_tile2","_buttons","_buttons2","_timer","_timer2","_stepper","_stepper2","_fetch","_fetch2","_getUsername","_getUsername2","scoreNames","userTopStepsList","userTopTimeList","globalTopStepsList","globalTopTimeList","scoreKeys","whenDirection","options","map","directionKey","toUpperCase","Puzzle","grid","buttons","timer","stepper","tileList","initializeTileList","initializeInput","enable","buttonTypes","SCRAMBLE","SCRAMBLING","scores","getScores","scoreContainer","WINNING","includes","movementThreshold","up","right","down","tile","findSpaceTile","animateToResetPosition","buttonAction","hitButton","reset","SHOW_SCORE","display","stopPropagation","rowItem","rowIndex","colItem","colIndex","text","String","type","tileTypes","SPACE","NORMAL","size","setStartPoint","fromRowIndex","fromColIndex","toRowIndex","toColIndex","fromTile","toTile","tileSize","tileSpacing","moveStartPoint","STARTED","checkWinning","_this2","_findSpaceTile","swapTiles","reduce","result","tileRow","tileResult","renders","accRowList","list","accRowSpaceTile","spaceTile","_tileRow$reduce","_ref5","rowList","rowSpaceTile","_this3","directionKeys","floor","random","winning","every","Number","stop","saveScore","_this4","get","_ref6","regeneratorRuntime","mark","_callee","fingerprint","wrap","_context","prev","next","path","data","sent","updateScoreBoard","_x","_this5","time","getTime","steps","getStepper","_ref7","_callee2","username","timestamp","_context2","getNow","_x2","_this6","innerHTML","scoreTab","createElement","setAttribute","scoreList","scoreKey","tab","appendChild","ul","titleLi","index","scoreItem","scoreIndex","li","formatTime","scoreTabs","children","scoreLists","listItem","hasAttribute","tabItem","removeAttribute","./src/main/puzzle/buttons.js","Buttons","disabled","types","button","buttonWidth","buttonAreaWidth","buttonSpacing","foundButton","find","buttonLeft","buttonAreaLeft","buttonAreaTop","buttonAreaHeight","fillStyle","buttonDisabledBackgroundColor","buttonBackgroundColor","fillRect","font","textAlign","textBaseline","buttonTextColor","fillText","./src/main/puzzle/grid.js","Grid","gridX","gridY","gridSize","borderWidth","gridBorderWidth","strokeStyle","gridBorderColor","gridBackgroundColor","lineWidth","strokeRect","./src/main/puzzle/stepper.js","Stepper","stepperFontSize","stepperHeight","stepperFontColor","stepperLeft","stepperWidth","stepperTop","./src/main/puzzle/tile.js","_bezierEasing","_bezierEasing2","Tile","_ref$deltaX","_ref$deltaY","tileBorderWidth","tileBorderColor","tileColors","min","easing","animationDuration","_getTilePosition","getTilePosition","_getTilePosition2","tileTextColor","renderSpaceTile","renderNormalTile","updateDeltaAnimation","animationStartTime","animationStartDeltaX","animationStartDeltaY","animationStartWidth","animationStartHeight","progress","./src/main/puzzle/timer.js","pad","string","milliseconds","seconds","minutes","Timer","startingTime","timerFontSize","timerHeight","timerFontColor","timerLeft","timerTop","./src/styles/index.pcss","content","locals","0"],"mappings":";AAAAA,cAAc,IAERC,4CACA,SAAUC,EAAQC,EAASC,GAEjC,YCYA,SAASC,GAAGC,EAAKC,GAAO,MAAO,GAAM,EAAMA,EAAM,EAAMD,EACvD,QAASE,GAAGF,EAAKC,GAAO,MAAO,GAAMA,EAAM,EAAMD,EACjD,QAASG,GAAGH,GAAY,MAAO,GAAMA,EAGrC,QAASI,GAAYC,EAAIL,EAAKC,GAAO,QAASF,EAAEC,EAAKC,GAAOI,EAAKH,EAAEF,EAAKC,IAAQI,EAAKF,EAAEH,IAAQK,EAG/F,QAASC,GAAUD,EAAIL,EAAKC,GAAO,MAAO,GAAMF,EAAEC,EAAKC,GAAOI,EAAKA,EAAK,EAAMH,EAAEF,EAAKC,GAAOI,EAAKF,EAAEH,GAEnG,QAASO,GAAiBC,EAAIC,EAAIC,EAAIC,EAAKC,GACzC,GAAIC,GAAUC,EAAUC,EAAI,CAC5B,GACED,GAAWL,GAAMC,EAAKD,GAAM,EAC5BI,EAAWT,EAAWU,EAAUH,EAAKC,GAAOJ,EACxCK,EAAW,EACbH,EAAKI,EAELL,EAAKK,QAEAE,KAAKC,IAAIJ,GAAYK,KAA2BH,EAAII,EAC7D,OAAOL,GAGT,QAASM,GAAsBZ,EAAIa,EAASV,EAAKC,GAChD,IAAK,GAAIG,GAAI,EAAGA,EAAIO,IAAqBP,EAAG,CAC1C,GAAIQ,GAAejB,EAASe,EAASV,EAAKC,EAC1C,IAAqB,IAAjBW,EACF,MAAOF,EAET,IAAIR,GAAWT,EAAWiB,EAASV,EAAKC,GAAOJ,CAC/Ca,IAAWR,EAAWU,EAExB,MAAOF,GA3CR,GAAIC,GAAoB,EACpBE,EAAmB,KACnBN,EAAwB,KACxBC,EAA6B,GAE7BM,EAAmB,GACnBC,EAAkB,GAAOD,EAAmB,GAE5CE,EAAgD,kBAAjBC,aAsCnChC,GAAOC,QAAU,SAAiBc,EAAKkB,EAAKjB,EAAKkB,GAa/C,QAASC,GAAUvB,GAKjB,IAJA,GAAIwB,GAAgB,EAChBC,EAAgB,EAChBC,EAAaT,EAAmB,EAE7BQ,IAAkBC,GAAcC,EAAaF,IAAkBzB,IAAMyB,EAC1ED,GAAiBN,IAEjBO,CAGF,IAAIG,IAAQ5B,EAAK2B,EAAaF,KAAmBE,EAAaF,EAAgB,GAAKE,EAAaF,IAC5FI,EAAYL,EAAgBI,EAAOV,EAEnCY,EAAehC,EAAS+B,EAAW1B,EAAKC,EAC5C,OAAI0B,IAAgBd,EACXJ,EAAqBZ,EAAI6B,EAAW1B,EAAKC,GACtB,IAAjB0B,EACFD,EAEA9B,EAAgBC,EAAIwB,EAAeA,EAAgBN,EAAiBf,EAAKC,GAhCpF,KAAM,GAAKD,GAAOA,GAAO,GAAK,GAAKC,GAAOA,GAAO,GAC/C,KAAM,IAAI2B,OAAM,0CAIlB,IAAIJ,GAAeR,EAAwB,GAAIC,cAAaH,GAAoB,GAAIe,OAAMf,EAC1F,IAAId,IAAQkB,GAAOjB,IAAQkB,EACzB,IAAK,GAAIf,GAAI,EAAGA,EAAIU,IAAoBV,EACtCoB,EAAapB,GAAKX,EAAWW,EAAIW,EAAiBf,EAAKC,EA4B3D,OAAO,UAAuB6B,GAC5B,MAAI9B,KAAQkB,GAAOjB,IAAQkB,EAClBW,EAGC,IAANA,EACK,EAEC,IAANA,EACK,EAEFrC,EAAW2B,EAASU,GAAIZ,EAAKC,MD0BlCY,uGACA,SAAU9C,EAAQC,EAASC,GEhIjCD,EAAAD,EAAAC,QAAAC,EAAA,+CAKAD,EAAA8C,MAAA/C,EAAAmB,EAAA,0pEAA+qE,MFyIzqE6B,wCACA,SAAUhD,EAAQC,EAASC,GAEjC,YGrIA,SAAS+C,MA4BT,QAASC,GAAGC,EAAIC,EAASC,GACvBC,KAAKH,GAAKA,EACVG,KAAKF,QAAUA,EACfE,KAAKD,KAAOA,IAAQ,EActB,QAASE,GAAYC,EAASC,EAAON,EAAIC,EAASC,GAChD,GAAkB,kBAAPF,GACT,KAAM,IAAIO,WAAU,kCAGtB,IAAIC,GAAW,GAAIT,GAAGC,EAAIC,GAAWI,EAASH,GAC1CO,EAAMC,EAASA,EAASJ,EAAQA,CAMpC,OAJKD,GAAQM,QAAQF,GACXJ,EAAQM,QAAQF,GAAKT,GAC1BK,EAAQM,QAAQF,IAAQJ,EAAQM,QAAQF,GAAMD,GADhBH,EAAQM,QAAQF,GAAKb,KAAKY,IADlCH,EAAQM,QAAQF,GAAOD,EAAUH,EAAQO,gBAI7DP,EAUT,QAASQ,GAAWR,EAASI,GACI,MAAzBJ,EAAQO,aAAoBP,EAAQM,QAAU,GAAIb,SAC5CO,GAAQM,QAAQF,GAU9B,QAASK,KACPX,KAAKQ,QAAU,GAAIb,GACnBK,KAAKS,aAAe,EA3FtB,GAAIG,GAAMC,OAAOC,UAAUC,eACvBR,EAAS,GAkBTM,QAAOG,SACTrB,EAAOmB,UAAYD,OAAOG,OAAO,OAM5B,GAAIrB,IAASsB,YAAWV,GAAS,IA2ExCI,EAAaG,UAAUI,WAAa,WAClC,GACIC,GACAC,EAFAC,IAIJ,IAA0B,IAAtBrB,KAAKS,aAAoB,MAAOY,EAEpC,KAAKD,IAASD,GAASnB,KAAKQ,QACtBI,EAAIU,KAAKH,EAAQC,IAAOC,EAAM5B,KAAKc,EAASa,EAAKG,MAAM,GAAKH,EAGlE,OAAIP,QAAOW,sBACFH,EAAMI,OAAOZ,OAAOW,sBAAsBL,IAG5CE,GAUTV,EAAaG,UAAUY,UAAY,SAAmBvB,GACpD,GAAIG,GAAMC,EAASA,EAASJ,EAAQA,EAChCwB,EAAW3B,KAAKQ,QAAQF,EAE5B,KAAKqB,EAAU,QACf,IAAIA,EAAS9B,GAAI,OAAQ8B,EAAS9B,GAElC,KAAK,GAAIhC,GAAI,EAAG+D,EAAID,EAASE,OAAQC,EAAK,GAAIxC,OAAMsC,GAAI/D,EAAI+D,EAAG/D,IAC7DiE,EAAGjE,GAAK8D,EAAS9D,GAAGgC,EAGtB,OAAOiC,IAUTnB,EAAaG,UAAUiB,cAAgB,SAAuB5B,GAC5D,GAAIG,GAAMC,EAASA,EAASJ,EAAQA,EAChCuB,EAAY1B,KAAKQ,QAAQF,EAE7B,OAAKoB,GACDA,EAAU7B,GAAW,EAClB6B,EAAUG,OAFM,GAYzBlB,EAAaG,UAAUkB,KAAO,SAAc7B,EAAO8B,EAAIC,EAAIC,EAAIC,EAAIC,GACjE,GAAI/B,GAAMC,EAASA,EAASJ,EAAQA,CAEpC,KAAKH,KAAKQ,QAAQF,GAAM,OAAO,CAE/B,IAEIgC,GACAzE,EAHA6D,EAAY1B,KAAKQ,QAAQF,GACzBiC,EAAMC,UAAUX,MAIpB,IAAIH,EAAU7B,GAAI,CAGhB,OAFI6B,EAAU3B,MAAMC,KAAKyC,eAAetC,EAAOuB,EAAU7B,GAAI6C,QAAW,GAEhEH,GACN,IAAK,GAAG,MAAOb,GAAU7B,GAAGyB,KAAKI,EAAU5B,UAAU,CACrD,KAAK,GAAG,MAAO4B,GAAU7B,GAAGyB,KAAKI,EAAU5B,QAASmC,IAAK,CACzD,KAAK,GAAG,MAAOP,GAAU7B,GAAGyB,KAAKI,EAAU5B,QAASmC,EAAIC,IAAK,CAC7D,KAAK,GAAG,MAAOR,GAAU7B,GAAGyB,KAAKI,EAAU5B,QAASmC,EAAIC,EAAIC,IAAK,CACjE,KAAK,GAAG,MAAOT,GAAU7B,GAAGyB,KAAKI,EAAU5B,QAASmC,EAAIC,EAAIC,EAAIC,IAAK,CACrE,KAAK,GAAG,MAAOV,GAAU7B,GAAGyB,KAAKI,EAAU5B,QAASmC,EAAIC,EAAIC,EAAIC,EAAIC,IAAK,EAG3E,IAAKxE,EAAI,EAAGyE,EAAO,GAAIhD,OAAMiD,EAAK,GAAI1E,EAAI0E,EAAK1E,IAC7CyE,EAAKzE,EAAI,GAAK2E,UAAU3E,EAG1B6D,GAAU7B,GAAG8C,MAAMjB,EAAU5B,QAASwC,OACjC,CACL,GACIM,GADAf,EAASH,EAAUG,MAGvB,KAAKhE,EAAI,EAAGA,EAAIgE,EAAQhE,IAGtB,OAFI6D,EAAU7D,GAAGkC,MAAMC,KAAKyC,eAAetC,EAAOuB,EAAU7D,GAAGgC,GAAI6C,QAAW,GAEtEH,GACN,IAAK,GAAGb,EAAU7D,GAAGgC,GAAGyB,KAAKI,EAAU7D,GAAGiC,QAAU,MACpD,KAAK,GAAG4B,EAAU7D,GAAGgC,GAAGyB,KAAKI,EAAU7D,GAAGiC,QAASmC,EAAK,MACxD,KAAK,GAAGP,EAAU7D,GAAGgC,GAAGyB,KAAKI,EAAU7D,GAAGiC,QAASmC,EAAIC,EAAK,MAC5D,KAAK,GAAGR,EAAU7D,GAAGgC,GAAGyB,KAAKI,EAAU7D,GAAGiC,QAASmC,EAAIC,EAAIC,EAAK,MAChE,SACE,IAAKG,EAAM,IAAKM,EAAI,EAAGN,EAAO,GAAIhD,OAAMiD,EAAK,GAAIK,EAAIL,EAAKK,IACxDN,EAAKM,EAAI,GAAKJ,UAAUI,EAG1BlB,GAAU7D,GAAGgC,GAAG8C,MAAMjB,EAAU7D,GAAGiC,QAASwC,IAKpD,OAAO,GAYT3B,EAAaG,UAAU+B,GAAK,SAAY1C,EAAON,EAAIC,GACjD,MAAOG,GAAYD,KAAMG,EAAON,EAAIC,GAAS,IAY/Ca,EAAaG,UAAUf,KAAO,SAAcI,EAAON,EAAIC,GACrD,MAAOG,GAAYD,KAAMG,EAAON,EAAIC,GAAS,IAa/Ca,EAAaG,UAAU2B,eAAiB,SAAwBtC,EAAON,EAAIC,EAASC,GAClF,GAAIO,GAAMC,EAASA,EAASJ,EAAQA,CAEpC,KAAKH,KAAKQ,QAAQF,GAAM,MAAON,KAC/B,KAAKH,EAEH,MADAa,GAAWV,KAAMM,GACVN,IAGT,IAAI0B,GAAY1B,KAAKQ,QAAQF,EAE7B,IAAIoB,EAAU7B,GAEV6B,EAAU7B,KAAOA,GACfE,IAAQ2B,EAAU3B,MAClBD,GAAW4B,EAAU5B,UAAYA,GAEnCY,EAAWV,KAAMM,OAEd,CACL,IAAK,GAAIzC,GAAI,EAAGsD,KAAaU,EAASH,EAAUG,OAAQhE,EAAIgE,EAAQhE,KAEhE6D,EAAU7D,GAAGgC,KAAOA,GACnBE,IAAS2B,EAAU7D,GAAGkC,MACtBD,GAAW4B,EAAU7D,GAAGiC,UAAYA,IAErCqB,EAAO1B,KAAKiC,EAAU7D,GAOtBsD,GAAOU,OAAQ7B,KAAKQ,QAAQF,GAAyB,IAAlBa,EAAOU,OAAeV,EAAO,GAAKA,EACpET,EAAWV,KAAMM,GAGxB,MAAON,OAUTW,EAAaG,UAAUgC,mBAAqB,SAA4B3C,GACtE,GAAIG,EAUJ,OARIH,IACFG,EAAMC,EAASA,EAASJ,EAAQA,EAC5BH,KAAKQ,QAAQF,IAAMI,EAAWV,KAAMM,KAExCN,KAAKQ,QAAU,GAAIb,GACnBK,KAAKS,aAAe,GAGfT,MAMTW,EAAaG,UAAUiC,IAAMpC,EAAaG,UAAU2B,eACpD9B,EAAaG,UAAUb,YAAcU,EAAaG,UAAU+B,GAK5DlC,EAAaqC,SAAWzC,EAKxBI,EAAaA,aAAeA,EAM1BjE,EAAOC,QAAUgE,GHqJbsC,yBACA,SAAUvG,EAAQC,EAASC,GAEjC,YIjeAA,GAAA,wBJifMsG,uBACA,SAAUxG,EAAQC,EAASC,GAEjC,YAWA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCARhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MKhgBhiBc,EAAAvH,EAAA,yBAEqBwH,ELogBR,WKngBT,QAAAA,KAAcjB,EAAAnD,KAAAoE,EACV,IAAMC,GAASC,SAASC,cAAc,aACtCvE,MAAKqE,OAASA,EACdrE,KAAKwE,IAAMH,EAAOI,WAAW,MAC7BzE,KAAK0E,MAALP,EAAAQ,YACA3E,KAAK4E,OAALT,EAAAU,aACAR,EAAOK,MAAPP,EAAAQ,YACAN,EAAOO,OAAPT,EAAAU,aACA7E,KAAK8E,QACDJ,MAAOK,OAAOC,WACdJ,OAAQG,OAAOE,YACfC,IAAK,EACLC,KAAM,GAEVnF,KAAKoF,iBLgjBT,MAvCA5B,GAAaY,IACTJ,IAAK,iBACLT,MAAO,WKxgBM,GACLc,GAAkCrE,KAAlCqE,OAAQK,EAA0B1E,KAA1B0E,MAAOE,EAAmB5E,KAAnB4E,OAAQE,EAAW9E,KAAX8E,MAC3BJ,GAAQE,EAASG,OAAOC,WAAaD,OAAOE,aAE5CH,EAAOJ,MAAQK,OAAOC,WACtBF,EAAOF,OAASG,OAAOC,WAAaJ,EAASF,IAE7CI,EAAOF,OAASG,OAAOE,YACvBH,EAAOJ,MAAQK,OAAOE,YAAcP,EAAQE,GAEhDE,EAAOI,KAAOH,OAAOE,YAAcH,EAAOF,QAAU,EACpDE,EAAOK,MAAQJ,OAAOC,WAAaF,EAAOJ,OAAS,EACnD7D,OAAOwE,KAAKP,GAAQQ,QAAQ,SAACC,GACzBlB,EAAOmB,MAAMD,GAAYT,EAAOS,GAAY,ULghBhDvB,IAAK,SACLT,MAAO,WK5gBP,MAAOvD,MAAKwE,OLghBZR,IAAK,YACLT,MAAO,WK7gBP,MAAOvD,MAAKqE,ULihBZL,IAAK,QACLT,MAAO,WK9gBPvD,KAAKwE,IAAIiB,UAAU,EAAG,EAAGzF,KAAK0E,MAAO1E,KAAK4E,YLmhBvCR,IAGXzH,GAAQ+I,QKlkBatB,GLskBfuB,sBACA,SAAUjJ,EAAQC,EAASC,GAEjC,YAwBA,SAASgJ,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQH,QAASG,GAEvF,QAAS1C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAvBhH,GAAIoD,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,KMzkBhiBzG,GAAA,0BAEA,IAAAuH,GAAAvH,EAAA,yBACAmJ,EAAAnJ,EAAA,wBNilBIoJ,EAAWJ,EAAuBG,GMhlBtCE,EAAArJ,EAAA,wBNolBIsJ,EAAWN,EAAuBK,GMnlBtCE,EAAAvJ,EAAA,uBNulBIwJ,EAAUR,EAAuBO,GMrlB/BE,EN2lBK,WM1lBP,QAAAA,KAAuC,GAAAC,GAAA9D,UAAAX,OAAA,GAAAa,SAAAF,UAAA,GAAAA,UAAA,MAAA+D,EAAAD,EAAzBE,MAAyB9D,SAAA6D,EAAnB,EAAmBA,EAAAE,EAAAH,EAAhBI,MAAgBhE,SAAA+D,EAAV,EAAUA,CAAAtD,GAAAnD,KAAAqG,EACnC,IAAMhC,GAAS,GAAA2B,GAAAN,QACTiB,EAAQ,GAAAP,GAAAV,SAAYrB,OAAQA,EAAOuC,cACnCC,EAAS,GAAAX,GAAAR,SAAalB,IAAKH,EAAOyC,SAAUN,MAAKE,MAAKC,SAC5D3G,MAAKqE,OAASA,EACdrE,KAAK6G,OAASA,EAEdvC,SAASyC,KAAKC,iBAAiB7C,EAAA8C,cAAcC,WAAY,SAACC,GACtDA,EAAEC,mBACDC,SAAS,IACdV,EAAM9D,GAAGsB,EAAAhD,OAAOmG,cAAe,WAC3BjD,EAAOe,mBN2oBf,MApCA5B,GAAa6C,IACTrC,IAAK,SACLT,MAAO,WMrmBF,GACGsD,GAAmB7G,KAAnB6G,OAAQxC,EAAWrE,KAAXqE,MAChBA,GAAOkD,QACPV,EAAOW,YN0mBPxD,IAAK,SACLT,MAAO,WMxmBF,GACGsD,GAAW7G,KAAX6G,MACRA,GAAOY,YN4mBPzD,IAAK,OACLT,MAAO,WM1mBJ,GAAAmE,GAAA1H,IACHA,MAAKyH,SACLzH,KAAKwH,SACLG,sBAAsB,WAClBD,EAAKE,YNgnBT5D,IAAK,QACLT,MAAO,WM5mBPvD,KAAK4H,OACL5H,KAAK6G,OAAOgB,WACZ7H,KAAK6G,OAAOiB,aAAe3D,EAAA4D,kBAAkBC,UNinB1C3B,MM7mBX,GAAIA,IAAO4B,SNonBLC,sBACA,SAAUxL,EAAQC,EAASC,GAEjC,YAaA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAEhH,QAAS+H,GAA2BC,EAAM9G,GAAQ,IAAK8G,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAO/G,GAAyB,gBAATA,IAAqC,kBAATA,GAA8B8G,EAAP9G,EAElO,QAASgH,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIpI,WAAU,iEAAoEoI,GAAeD,GAASzH,UAAYD,OAAOG,OAAOwH,GAAcA,EAAW1H,WAAa2H,aAAelF,MAAOgF,EAAU1E,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAe0E,IAAY3H,OAAO6H,eAAiB7H,OAAO6H,eAAeH,EAAUC,GAAcD,EAAStH,UAAYuH,GAdje3H,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MOprBhiBsF,EAAA/L,EAAA,yCAEAuH,EAAAvH,EAAA,yBAEMgM,EAAY,SAACzB,GACf,MAAIA,GAAE0B,gBAEEtJ,GAAG,EAAA4E,EAAA2E,kBAAiB3B,EAAE0B,eAAe,GAAGE,QAAU5B,EAAEzD,OAAOsF,YAC3DC,GAAG,EAAA9E,EAAA2E,kBAAiB3B,EAAE0B,eAAe,GAAGK,QAAU/B,EAAEzD,OAAOyF,aAI/D5J,GAAG,EAAA4E,EAAA2E,kBAAiB3B,EAAE4B,QAAU5B,EAAEzD,OAAOsF,YACzCC,GAAG,EAAA9E,EAAA2E,kBAAiB3B,EAAE+B,QAAU/B,EAAEzD,OAAOyF,aAI5BC,EP4rBT,SAAUC,GO3rBlB,QAAAD,GAAA9C,GAAwB,GAAVjC,GAAUiC,EAAVjC,MAAUlB,GAAAnD,KAAAoJ,EAAA,IAAA1B,GAAAS,EAAAnI,MAAAoJ,EAAAnI,WAAAJ,OAAAyI,eAAAF,IAAA9H,KAAAtB,MAAA,OAAA0H,GAiExBO,MAAQ,SAACd,GACL,GAAMoC,GAAQX,EAAUzB,EACxBO,GAAK8B,WAAWD,IAnEI7B,EAsExB+B,KAAO,SAACtC,GACJ,GAAMoC,GAAQX,EAAUzB,EACxBO,GAAKgC,OAASH,EAAMhK,EACpBmI,EAAKiC,OAASJ,EAAMN,EACpBvB,EAAKkC,WA1EelC,EA6ExBmC,IAAM,WACFnC,EAAK8B,WAAW9B,EAAKoC,cACrBpC,EAAK1F,KAAKmC,EAAAhD,OAAO4I,mBA/EGrC,EAkFxBsC,MAAQ,SAAC7C,GACLO,EAAK1F,KAAKmC,EAAAhD,OAAO8I,MAAOrB,EAAUzB,KAnFdO,EAsFxBwC,OAAS,WACLxC,EAAK1F,KAAKmC,EAAAhD,OAAOmG,gBAvFGI,EA0FxByC,kBAAoB,WAChBzC,EAAK1F,KAAKmC,EAAAhD,OAAOmG,gBAzFjBI,EAAKrD,OAASA,EAEdqD,EAAKoC,cAAiBvK,EAAG,KAAM0J,EAAG,MAClCvB,EAAK8B,WAAW9B,EAAKoC,cAErBpC,EAAK0C,aAPe1C,EPszBxB,MA1HAY,GAAUc,EAAOC,GA+CjB7F,EAAa4F,IACTpF,IAAK,aACLT,MAAO,WOnuBE,GACDc,GAAWrE,KAAXqE,OACFgG,EAAU/F,SAASyC,IACzBsD,GAAQrD,iBAAiB7C,EAAA8C,cAAcqD,YAAatK,KAAKiI,OAASZ,SAAS,IAC3EgD,EAAQrD,iBAAiB7C,EAAA8C,cAAcC,WAAYlH,KAAKyJ,MAAQpC,SAAS,IACzEgD,EAAQrD,iBAAiB7C,EAAA8C,cAAcsD,UAAWvK,KAAK6J,KAAOxC,SAAS,IACvEgD,EAAQrD,iBAAiB7C,EAAA8C,cAAcuD,aAAcxK,KAAK6J,KAAOxC,SAAS,IAC1EhD,EAAO2C,iBAAiB7C,EAAA8C,cAAcgD,MAAOjK,KAAKgK,OAAS3C,SAAS,IACpEtC,OAAOiC,iBAAiB7C,EAAA8C,cAAcwD,OAAQzK,KAAKkK,QAAU7C,SAAS,IACtEtC,OAAOiC,iBAAiB7C,EAAA8C,cAAcyD,mBAAoB1K,KAAKmK,mBAAqB9C,SAAS,OPuuB7FrD,IAAK,eACLT,MAAO,WOpuBP,GAAMoH,GAAY7M,KAAKC,IAAIiC,KAAK4K,YAAc5K,KAAK0J,QAC7CmB,EAAY/M,KAAKC,IAAIiC,KAAK8K,YAAc9K,KAAK2J,OACnD,OAAIgB,GAAYE,EACR7K,KAAK0J,OAAS1J,KAAK4K,YAAc,EAC1BzG,EAAA4G,WAAWC,MAEX7G,EAAA4G,WAAWE,KAGlBjL,KAAK2J,OAAS3J,KAAK8K,YAAc,EAC1B3G,EAAA4G,WAAWG,KAEX/G,EAAA4G,WAAWI,MP0uB1BnH,IAAK,UACLT,MAAO,WOruBP,GAAMoH,GAAY3K,KAAK0J,OAAS1J,KAAK4K,YAC/BC,EAAY7K,KAAK2J,OAAS3J,KAAK8K,YAC/BvB,GAAU6B,OAAQT,EAAWU,OAAQR,EAAWtL,EAAGS,KAAK0J,OAAQT,EAAGjJ,KAAK2J,QACxE2B,EAAYtL,KAAKuL,cACvBvL,MAAKgC,KAAKmC,EAAAhD,OAAOqK,SAAUF,EAAW/B,MPyuBtCvF,IAAK,gBACLT,MAAO,SAAuBkI,GOvuB4B,GAAAC,GAAAD,EAA9ClM,IAA8CmD,SAAAgJ,EAA1C1L,KAAK4K,YAAqCc,EAAAC,EAAAF,EAAxBxC,IAAwBvG,SAAAiJ,EAApB3L,KAAK8K,YAAea,CAC1D3L,MAAK4K,YAAcrL,EACnBS,KAAK8K,YAAc7B,KP+uBnBjF,IAAK,iBACLT,MAAO,SAAwBqI,GO7uBV,GAARrM,GAAQqM,EAARrM,EAAG0J,EAAK2C,EAAL3C,CAChBjJ,MAAK4K,aAAerL,EACpBS,KAAK8K,aAAe7B,KPmvBpBjF,IAAK,aACLT,MAAO,SAAoBsI,GOjvBV,GAARtM,GAAQsM,EAARtM,EAAG0J,EAAK4C,EAAL5C,CACZjJ,MAAK4K,YAAcrL,EACnBS,KAAK8K,YAAc7B,EACnBjJ,KAAK0J,OAASnK,EACdS,KAAK2J,OAASV,MPwvBXG,GACTT,EAAchI,aAEhBhE,GAAQ+I,QO1zBa0D,GP+zBf0C,uBACA,SAAUpP,EAAQC,EAASC,GAEjC,YA2CA,SAASgJ,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQH,QAASG,GAEvF,QAASkG,GAAkBlM,GAAM,MAAO,YAAc,GAAImM,GAAMnM,EAAG8C,MAAM3C,KAAMwC,UAAY,OAAO,IAAIyJ,SAAQ,SAAUC,EAASC,GAAU,QAASC,GAAKpI,EAAKqI,GAAO,IAAM,GAAIC,GAAON,EAAIhI,GAAKqI,GAAU9I,EAAQ+I,EAAK/I,MAAS,MAAOgJ,GAAwB,WAAfJ,GAAOI,GAAkB,MAAID,GAAKE,SAAQN,GAAQ3I,GAAwB0I,QAAQC,QAAQ3I,GAAOkJ,KAAK,SAAUlJ,GAAS6I,EAAK,OAAQ7I,IAAW,SAAUmJ,GAAON,EAAK,QAASM,KAAc,MAAON,GAAK,WAEzb,QAASO,GAAmBC,GAAO,GAAItN,MAAMuN,QAAQD,GAAM,CAAE,IAAK,GAAI/O,GAAI,EAAGiP,EAAOxN,MAAMsN,EAAI/K,QAAShE,EAAI+O,EAAI/K,OAAQhE,IAAOiP,EAAKjP,GAAK+O,EAAI/O,EAAM,OAAOiP,GAAe,MAAOxN,OAAMyN,KAAKH,GAE1L,QAASzJ,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCA9ChHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MQ11BhiB2J,EAAApQ,EAAA,0DR81BIqQ,EAAkBrH,EAAuBoH,GQ51B7C7I,EAAAvH,EAAA,yBAcAsQ,EAAAtQ,EAAA,6BRo1BIuQ,EAASvH,EAAuBsH,GQn1BpCE,EAAAxQ,EAAA,6BRu1BIyQ,EAASzH,EAAuBwH,GQt1BpCE,EAAA1Q,EAAA,gCR01BI2Q,EAAY3H,EAAuB0H,GQz1BvCE,EAAA5Q,EAAA,8BR61BI6Q,EAAU7H,EAAuB4H,GQ51BrCE,EAAA9Q,EAAA,gCRg2BI+Q,EAAY/H,EAAuB8H,GQ/1BvCE,EAAAhR,EAAA,sBRm2BIiR,EAAUjI,EAAuBgI,GQl2BrCE,EAAAlR,EAAA,4BRs2BImR,EAAgBnI,EAAuBkI,GQp2BrCE,GACFC,iBAAkB,WAClBC,gBAAiB,UACjBC,mBAAoB,cACpBC,kBAAmB,cAEjBC,GAAa,WAAY,QAAS,OAAQ,aAE1CC,EAAgB,SAAChD,GACnB,MAAO,UAACiD,GACJ,MAAO1N,QAAOwE,KAAKkJ,GAASC,IAAI,SAACC,GAC7B,GAAIA,EAAaC,gBAAkBpD,EAC/B,MAAOiD,GAAQE,SAMVE,ER82BR,WQ72BT,QAAAA,GAAArI,GAAsC,GAAxB9B,GAAwB8B,EAAxB9B,IAAKgC,EAAmBF,EAAnBE,IAAKE,EAAcJ,EAAdI,IAAKC,EAASL,EAATK,KAASxD,GAAAnD,KAAA2O,GAClC3O,KAAKwE,IAAMA,EACXxE,KAAKwG,IAAMA,EACXxG,KAAK0G,IAAMA,EACX1G,KAAK2G,MAAQA,EAEb3G,KAAK4O,KAAO,GAAAzB,GAAAzH,SAAWlB,QACvBxE,KAAK6O,QAAU,GAAAtB,GAAA7H,SAAclB,QAC7BxE,KAAK8O,MAAQ,GAAArB,GAAA/H,SAAYlB,QACzBxE,KAAK+O,QAAU,GAAApB,GAAAjI,SAAclB,QAE7BxE,KAAKgP,SAAWhP,KAAKiP,qBACrBjP,KAAKkP,kBACLlP,KAAK6O,QAAQM,QAAQhL,EAAAiL,YAAYC,WACjCrP,KAAK8H,aAAe3D,EAAA4D,kBAAkBuH,WAEtCtP,KAAKuP,UACLvP,KAAKwP,YRk0CT,MA1cAhM,GAAamL,IACT3K,IAAK,kBACLT,MAAO,WQv3BO,GAAAmE,GAAA1H,KACRyP,EAAiBnL,SAASC,cAAc,sBAE9CvE,MAAK2G,MAAM9D,GAAGsB,EAAAhD,OAAOqK,SAAU,SAACF,EAAW/B,IAClCpF,EAAA4D,kBAAkBuH,WAAYnL,EAAA4D,kBAAkB2H,SAASC,SAASjI,EAAKI,gBAG5EJ,EAAKkC,QAAQ0B,EAAW/B,GACxB+E,EAAchD,IACVnG,KAAM,WACEoE,EAAM6B,QAASjH,EAAAyL,mBACflI,EAAK+B,KAAK6B,EAAW/B,IAG7BsG,GAAI,WACItG,EAAM8B,QAASlH,EAAAyL,mBACflI,EAAK+B,KAAK6B,EAAW/B,IAG7BuG,MAAO,WACCvG,EAAM6B,OAANjH,EAAAyL,mBACAlI,EAAK+B,KAAK6B,EAAW/B,IAG7BwG,KAAM,WACExG,EAAM8B,OAANlH,EAAAyL,mBACAlI,EAAK+B,KAAK6B,EAAW/B,SAKrCvJ,KAAK2G,MAAM9D,GAAGsB,EAAAhD,OAAO4I,iBAAkB,WACnC,GAAMiG,GAAOtI,EAAKuI,eAClBD,GAAKE,2BAETlQ,KAAK2G,MAAM9D,GAAGsB,EAAAhD,OAAO8I,MAAO,SAACV,GACzB,GAAM4G,GAAezI,EAAKmH,QAAQuB,UAAU7G,EAC5C,QAAQ4G,GACJ,IAAKhM,GAAAiL,YAAYC,SACb3H,EAAKI,aAAe3D,EAAA4D,kBAAkBuH,WACtC5H,EAAKoH,MAAMuB,QACX3I,EAAKqH,QAAQsB,QACb3I,EAAKG,WACLH,EAAKI,aAAe3D,EAAA4D,kBAAkBC,MACtCN,EAAKmH,QAAQM,QAAQhL,EAAAiL,YAAYC,UACjC,MACJ,KAAKlL,GAAAiL,YAAYkB,WACbb,EAAejK,MAAM+K,QAAU,OAC/B7I,EAAKmH,QAAQM,QAAQhL,EAAAiL,YAAYkB,gBAK7Cb,EAAezI,iBAAiB7C,EAAA8C,cAAcqD,YAAa,SAACnD,GACxDA,EAAEqJ,oBAENf,EAAezI,iBAAiB7C,EAAA8C,cAAcC,WAAY,SAACC,GACvDA,EAAEqJ,oBAENf,EAAezI,iBAAiB7C,EAAA8C,cAAcsD,UAAW,SAACpD,GACtDA,EAAEqJ,oBAENf,EAAezI,iBAAiB7C,EAAA8C,cAAcuD,aAAc,SAACrD,GACzDA,EAAEqJ,oBAENf,EAAezI,iBAAiB7C,EAAA8C,cAAcgD,MAAO,WACjDwF,EAAejK,MAAM+K,QAAU,YR63BnCvM,IAAK,qBACLT,MAAO,WQ13BU,GACTiB,GAAkBxE,KAAlBwE,IAAKkC,EAAa1G,KAAb0G,IAAKF,EAAQxG,KAARwG,IACZ9B,aACAE,YACN,OAAOtF,OAAMyN,MAAOlL,OAAQ2E,GAAO,SAACiK,EAASC,GACzC,MAAOpR,OAAMyN,MAAOlL,OAAQ6E,GAAO,SAACiK,EAASC,GACzC,MAAO,IAAAvD,GAAA3H,SACHlB,IAAKA,EACLE,QACAE,SACAgM,WACAF,WACAG,KAAMC,OAAOJ,EAAWlK,EAAMoK,EAAW,GACzCG,KAAMH,IAAalK,EAAM,GAAKgK,IAAalK,EAAM,EAAIrC,EAAA6M,UAAUC,MAAQ9M,EAAA6M,UAAUE,gBRm4B7FlN,IAAK,UACLT,MAAO,SQ93BH+H,EAAW/B,GACf,GAAMyG,GAAOhQ,KAAKiQ,eACdD,GAAKY,UAAYzM,EAAAgN,KAAO,GAAK5H,EAAM6B,OAAS,IAC5CpL,KAAK2G,MAAMyK,eAAgB7R,EAAGyQ,EAAKzQ,IACnCgK,EAAM6B,OAAS,GAEf4E,EAAKY,UAAY,GAAKrH,EAAM6B,OAAS,IACrCpL,KAAK2G,MAAMyK,eAAgB7R,EAAGyQ,EAAKzQ,IACnCgK,EAAM6B,OAAS,GAEf4E,EAAKU,UAAY,GAAKnH,EAAM8B,OAAS,IACrCrL,KAAK2G,MAAMyK,eAAgBnI,EAAG+G,EAAK/G,IACnCM,EAAM8B,OAAS,GAEf2E,EAAKU,UAAYvM,EAAAgN,KAAO,GAAK5H,EAAM8B,OAAS,IAC5CrL,KAAK2G,MAAMyK,eAAgBnI,EAAG+G,EAAK/G,IACnCM,EAAM8B,OAAS,GAEnB2E,EAAK5E,OAAS7B,EAAM6B,OACpB4E,EAAK3E,OAAS9B,EAAM8B,URi4BpBrH,IAAK,YACLT,MAAO,SAAmBkI,EAAOG,GQ/3ByE,GAAxFyF,GAAwF5F,EAAlGiF,SAAkCY,EAAgE7F,EAA1EmF,SAAsCW,EAAoC3F,EAA9C8E,SAAgCc,EAAc5F,EAAxBgF,SAC5Ea,EAAWzR,KAAKgP,SAASqC,GAAcC,GACvCI,EAAS1R,KAAKgP,SAASuC,GAAYC,EAGzCxR,MAAKgP,SAASqC,GAAcC,GAAgBI,EAC5C1R,KAAKgP,SAASuC,GAAYC,GAAcC,EACxCA,EAASf,SAAWa,EACpBE,EAASb,SAAWY,EACpBE,EAAOhB,SAAWW,EAClBK,EAAOd,SAAWU,CAElB,IAAMlG,GAASqG,EAASrG,OAClBC,EAASoG,EAASpG,MACxBoG,GAASrG,QAAUkG,EAAeE,IAAerN,EAAAwN,SAAAxN,EAAAyN,aAA0BxG,EAC3EqG,EAASpG,QAAUgG,EAAeE,IAAepN,EAAAwN,SAAAxN,EAAAyN,aAA0BvG,EAC3EqG,EAAOtG,QAAUoG,EAAaF,IAAiBnN,EAAAwN,SAAAxN,EAAAyN,aAC/CF,EAAOrG,QAAUkG,EAAaF,IAAiBlN,EAAAwN,SAAAxN,EAAAyN,aAC/CF,EAAOxB,yBACPlQ,KAAK2G,MAAMkL,gBACPtS,GAAIiS,EAAaF,IAAiBnN,EAAAwN,SAAAxN,EAAAyN,aAClC3I,GAAIsI,EAAaF,IAAiBlN,EAAAwN,SAAAxN,EAAAyN,eAElC5R,KAAK8H,eAAiB3D,EAAA4D,kBAAkBC,QACxChI,KAAK8O,MAAM7G,QACXjI,KAAK8H,aAAe3D,EAAA4D,kBAAkB+J,SAEtC9R,KAAK8H,eAAiB3D,EAAA4D,kBAAkB+J,UACxC9R,KAAK+R,eACL/R,KAAK+O,QAAQtH,aRw4BjBzD,IAAK,OACLT,MAAO,SQr4BN+H,EAAW/B,GAAO,GAAAyI,GAAAhS,KAAAiS,EACYjS,KAAKiQ,gBAA5BS,EADWuB,EACXvB,SAAUE,EADCqB,EACDrB,QAClBtC,GAAchD,IACVnG,KAAM,WACF,MAAIyL,IAAY,MACZoB,GAAKrL,MAAM6C,WAAWD,OAI1ByI,GAAKE,WAAYxB,WAAUE,aAAcF,WAAUE,SAAUA,EAAW,KAE5Ef,GAAI,WACA,MAAIa,IAAY,MACZsB,GAAKrL,MAAM6C,WAAWD,OAI1ByI,GAAKE,WAAYxB,WAAUE,aAAcF,SAAUA,EAAW,EAAGE,cAErEd,MAAO,WACH,MAAIc,IAAYoB,EAAKtL,IAAM,MACvBsL,GAAKrL,MAAM6C,WAAWD,OAI1ByI,GAAKE,WAAYxB,WAAUE,aAAcF,WAAUE,SAAUA,EAAW,KAE5Eb,KAAM,WACF,MAAIW,IAAYsB,EAAKxL,IAAM,MACvBwL,GAAKrL,MAAM6C,WAAWD,OAI1ByI,GAAKE,WAAYxB,WAAUE,aAAcF,SAAUA,EAAW,EAAGE,mBR+4BzE5M,IAAK,gBACLT,MAAO,WQ34BK,GACJyL,GAAahP,KAAbgP,QACR,OAAOA,GAASmD,OAAO,SAACC,EAAQC,GAC5B,MAAOD,IAAUC,EAAQF,OAAO,SAACG,EAAYtC,GACzC,MAAIA,GAAKe,OAAS5M,EAAA6M,UAAUC,MACjBjB,EAEJsC,GACR,OACJ,SR+4BHtO,IAAK,SACLT,MAAO,WQ74BF,GACGqL,GAA4C5O,KAA5C4O,KAAMI,EAAsChP,KAAtCgP,SAAUH,EAA4B7O,KAA5B6O,QAASC,EAAmB9O,KAAnB8O,MAAOC,EAAY/O,KAAZ+O,QAClCwD,EAAUvD,EAASmD,OAAO,SAAAtG,EAAmDwG,GAAY,GAAtDG,GAAsD3G,EAA5D4G,KAA6BC,EAA+B7G,EAA1C8G,UAA0CC,EACxCP,EAAQF,OAAO,SAAAU,EAAsB7C,GAAS,GAA5ByC,GAA4BI,EAA5BJ,KAAME,EAAsBE,EAAtBF,SACvE,OAAI3C,GAAKe,OAAS5M,EAAA6M,UAAUC,OACfwB,iBAAUA,IAAMzC,IAAO2C,cAEvBF,OAAME,UAAW3C,KAE7ByC,QAAUE,UAAW,OANZG,EAD6EF,EACnFH,KAA0BM,EADyDH,EACpED,SAOvB,QAASF,iBAAUD,GAAV7F,EAAyBmG,IAAUH,UAAWD,GAAmBK,KACzEN,QAAUE,UAAW,MAC1B/D,GAAKpH,SACL+K,EAAQI,UAAUnL,SAClB+K,EAAQE,KAAKjE,IAAI,SAACwB,GACdA,EAAKxI,WAETqH,EAAQrH,SACRsH,EAAMtH,SACNuH,EAAQvH,YR85BRxD,IAAK,SACLT,MAAO,WQ35BPvD,KAAKgP,SAAS1J,QAAQ,SAAC+M,GACnBA,EAAQ/M,QAAQ,SAAC0K,GACbA,EAAKvI,aAGbzH,KAAK8O,MAAMrH,YR+5BXzD,IAAK,WACLT,MAAO,WQ75BA,GAAAyP,GAAAhT,KACDiT,EAAgBpS,OAAOwE,KAAPlB,EAAA4G,WACtBzL,OAAMyN,MAAOlL,OAAQ,KAAQ,WACzB,MAAOsC,GAAA4G,WAAWkI,EAAcnV,KAAKoV,MAAMpV,KAAKqV,SAAWF,EAAcpR,YAC1E2M,IAAI,SAAClD,GACJ,MAAO0H,GAAKvJ,KAAK6B,GAAa/L,EAAG,EAAG0J,EAAG,KAE3C,IAAM+G,GAAOhQ,KAAKiQ,eAClBD,GAAKE,4BRk6BLlM,IAAK,eACLT,MAAO,WQh6BI,GACHiD,GAAQxG,KAARwG,IACF4M,EAAUpT,KAAKgP,SAASqE,MAAM,SAAChB,EAAS3B,GAC1C,MAAO2B,GAAQgB,MAAM,SAACrD,EAAMY,GACxB,MAAO0C,QAAOtD,EAAKa,QAAUH,EAAWlK,EAAMoK,EAAW,KAG7DwC,KACApT,KAAK8H,aAAe3D,EAAA4D,kBAAkB2H,QACtC1P,KAAK8O,MAAMyE,OACXvT,KAAKwT,gBRq6BTxP,IAAK,YACLT,MAAO,WQl6BC,GAAAkQ,GAAAzT,MACR,GAAAiN,GAAAvH,SAAmBgO,IAAnB,cAAAC,GAAA5H,EAAA6H,mBAAAC,KAAuB,QAAAC,GAAMC,GAAN,MAAAH,oBAAAI,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAE,KAAA,GACC,EAAAtG,EAAAnI,UAChB0O,KAAM,4BACNC,MAAQN,gBAHO,QACnBN,EAAKlE,OADc0E,EAAAK,KAKnBb,EAAKc,kBALc,wBAAAN,GAAAV,SAAAO,EAAAL,KAAvB,iBAAAe,GAAA,MAAAb,GAAAhR,MAAA3C,KAAAwC,mBRm8BAwB,IAAK,YACLT,MAAO,WQ37BC,GAAAkR,GAAAzU,KACF0U,EAAO1U,KAAK8O,MAAM6F,UAClBC,EAAQ5U,KAAK+O,QAAQ8F,cAC3B,GAAA5H,GAAAvH,SAAmBgO,IAAnB,cAAAoB,GAAA/I,EAAA6H,mBAAAC,KAAuB,QAAAkB,GAAMhB,GAAN,GAAAiB,GAAAC,CAAA,OAAArB,oBAAAI,KAAA,SAAAkB,GAAA,cAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,aACba,IAAW,EAAAjH,EAAArI,UAAcqO,gBACzBkB,GAAY,EAAA9Q,EAAAgR,UAFCD,EAAAf,KAAA,GAGC,EAAAtG,EAAAnI,UAChB0O,KAAM,2BACNC,MAAQW,WAAUN,OAAME,QAAOb,cAAakB,cAL7B,QAGnBR,EAAKlF,OAHc2F,EAAAZ,KAOnBG,EAAKF,kBAPc,wBAAAW,GAAA3B,SAAAwB,EAAAN,KAAvB,iBAAAW,GAAA,MAAAN,GAAAnS,MAAA3C,KAAAwC,mBR+9BAwB,IAAK,mBACLT,MAAO,WQr9BQ,GAAA8R,GAAArV,KACTyP,EAAiBnL,SAASC,cAAc,sBAC9CkL,GAAe6F,UAAY,EAC3B,IAAMC,GAAWjR,SAASkR,cAAc,MACxCD,GAASE,aAAa,QAAS,YAC/B,IAAMC,GAAYpR,SAASkR,cAAc,MACzCE,GAAUD,aAAa,QAAS,cAChC5U,OAAOwE,KAAK2I,GAAY1I,QAAQ,SAACqQ,GAC7B,GAAMC,GAAMtR,SAASkR,cAAc,MACnCI,GAAIN,UAAYtH,EAAW2H,GAC3BC,EAAIH,aAAa,QAAS,kBAC1BF,EAASM,YAAYD,EAErB,IAAME,GAAKxR,SAASkR,cAAc,MAC5BjG,EAAS8F,EAAK9F,OAAOoG,GAErBI,EAAUzR,SAASkR,cAAc,MAEjCQ,EAAQ1R,SAASkR,cAAc,MACrCQ,GAAMP,aAAa,QAAS,SAC5BO,EAAMV,UAAY,GAClBS,EAAQF,YAAYG,GAEpB3H,EAAU/I,QAAQ,SAACtB,GACf,GAAMqG,GAAU/F,SAASkR,cAAc,MACvCnL,GAAQoL,aAAa,QAASzR,GAC9BqG,EAAQiL,UAAYtR,EACpB+R,EAAQF,YAAYxL,KAExByL,EAAGD,YAAYE,GAEfxG,EAAOjK,QAAQ,SAAC2Q,EAAWC,GACvB,GAAMC,GAAK7R,SAASkR,cAAc,MAE5BQ,EAAQ1R,SAASkR,cAAc,MACrCQ,GAAMP,aAAa,QAAS,SAC5BO,EAAMV,UAAYY,EAAa,EAC/BC,EAAGN,YAAYG,GAEf3H,EAAU/I,QAAQ,SAACtB,GACf,GAAMqG,GAAU/F,SAASkR,cAAc,MACvCnL,GAAQoL,aAAa,QAASzR,GAClB,SAARA,EACAqG,EAAQiL,WAAY,EAAA9H,EAAA4I,YAAWH,EAAUjS,IAC1B,cAARA,EAEPqG,EAAQiL,UAAYW,EAAUjS,GAE9BqG,EAAQiL,UAAYW,EAAUjS,GAElCmS,EAAGN,YAAYxL,KAEnByL,EAAGD,YAAYM,KAEnBT,EAAUG,YAAYC,KAE1BrG,EAAeoG,YAAYN,GAC3B9F,EAAeoG,YAAYH,EAE3B,IAAMW,GAAY/W,MAAMyN,KAAKwI,EAASe,UAChCC,EAAajX,MAAMyN,KAAK2I,EAAUY,SACxCD,GAAU/Q,QAAQ,SAACsQ,EAAKI,GACN,IAAVA,IACAJ,EAAIH,aAAa,cAAe,IAChCc,EAAWjR,QAAQ,SAACkR,GAChBA,EAAShR,MAAM+K,QAAU,SAE7BgG,EAAWP,GAAOxQ,MAAM+K,QAAU,SAEtCqF,EAAI5O,iBAAiB7C,EAAA8C,cAAcgD,MAAO,SAAC9C,GACvCA,EAAEqJ,kBACGoF,EAAIa,aAAa,iBAClBJ,EAAU/Q,QAAQ,SAACoR,GACfA,EAAQC,gBAAgB,iBAE5Bf,EAAIH,aAAa,cAAe,IAChCc,EAAWjR,QAAQ,SAACkR,GAChBA,EAAShR,MAAM+K,QAAU,SAE7BgG,EAAWP,GAAOxQ,MAAM+K,QAAU,iBR89B3C5B,IAGXhS,GAAQ+I,QQv1CaiJ,GR21CfiI,+BACA,SAAUla,EAAQC,EAASC,GAEjC,YAcA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAXhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MS14ChiBc,EAAAvH,EAAA,yBAYqBia,ETu4CP,WSt4CV,QAAAA,GAAAvQ,GAAqB,GAAP9B,GAAO8B,EAAP9B,GAAOrB,GAAAnD,KAAA6W,GACjB7W,KAAKwE,IAAMA,EACXxE,KAAK6O,UACCgC,KAAM,WAAYiG,UAAU,EAAM/F,KAAM5M,EAAAiL,YAAYC,WACpDwB,KAAM,SAAUiG,UAAU,EAAO/F,KAAM5M,EAAAiL,YAAYkB,aTi8C7D,MArDA9M,GAAaqT,IACT7S,IAAK,SACLT,MAAO,SS14CJwT,GACH,MAAO/W,MAAK6O,QAAQL,IAAI,SAACwI,GACrB,QAAID,EAAMpH,SAASqH,EAAOjG,QACtBiG,EAAOF,UAAW,GACX,QTg5Cf9S,IAAK,YACLT,MAAO,SAAmBkI,GS34CV,GAARlM,GAAQkM,EAARlM,EAAG0J,EAAKwC,EAALxC,EACLgO,GAAe9S,EAAA+S,gBAAA/S,EAAAgT,eAAmCnX,KAAK6O,QAAQhN,OAAjDsC,EAAAgT,cACdC,EAAcpX,KAAK6O,QAAQwI,KAAK,SAACL,EAAQhB,GAC3C,GAAMsB,GAAanT,EAAAoT,eAAiBvB,GAASiB,kBAC7C,OAAI1X,GAAI+X,GAAc/X,EAAI+X,EAAaL,GAAehO,mBAAqBA,EAAI9E,EAAAqT,cAAArT,EAAAsT,mBACtET,EAAOF,WACRE,EAAOF,UAAW,GACX,IAKnB,OAAIM,GACOA,EAAYrG,KAEhB,QTi5CP/M,IAAK,SACLT,MAAO,WS/4CF,GACGiB,GAAQxE,KAARwE,IACFyS,GAAe9S,EAAA+S,gBAAA/S,EAAAgT,eAAmCnX,KAAK6O,QAAQhN,OAAjDsC,EAAAgT,aACpBnX,MAAK6O,QAAQvJ,QAAQ,SAAC0R,EAAQhB,GAC1B,GAAMzW,GAAI4E,EAAAoT,eAAiBvB,GAASiB,kBACpCzS,GAAIkT,UAAYV,EAAOF,SAAP3S,EAAAwT,8BAAAxT,EAAAyT,sBAChBpT,EAAIqT,SAAStY,EAAb4E,EAAAqT,cAA+BP,EAA/B9S,EAAAsT,kBAEAjT,EAAIsT,KAAO,aACXtT,EAAIuT,UAAY,SAChBvT,EAAIwT,aAAe,SACnBxT,EAAIkT,UAAJvT,EAAA8T,gBACAzT,EAAI0T,SAASlB,EAAOnG,KAAMtR,EAAI0X,EAAc,EAAG9S,EAAAqT,cAAgBrT,EAAAsT,iBAAmB,STq5CnFZ,IAGXla,GAAQ+I,QSz8CamR,GT68CfsB,4BACA,SAAUzb,EAAQC,EAASC,GAEjC,YAWA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCARhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MUx+ChiBc,EAAAvH,EAAA,yBAEqBwb,EV4+CV,WU3+CP,QAAAA,GAAA9R,GAAqB,GAAP9B,GAAO8B,EAAP9B,GAAOrB,GAAAnD,KAAAoY,GACjBpY,KAAKwE,IAAMA,EACXxE,KAAKT,EAAL4E,EAAAkU,MACArY,KAAKiJ,EAAL9E,EAAAmU,MACAtY,KAAK0E,MAAQ1E,KAAK4E,OAALT,EAAAoU,SACbvY,KAAKwY,YAALrU,EAAAsU,gBACAzY,KAAK0Y,YAALvU,EAAAwU,gBACA3Y,KAAK0X,UAALvT,EAAAyU,oBVygDJ,MAtBApV,GAAa4U,IACTpU,IAAK,SACLT,MAAO,WUl/CF,GACGiB,GAAkExE,KAAlEwE,IAAKkU,EAA6D1Y,KAA7D0Y,YAAahB,EAAgD1X,KAAhD0X,UAAWc,EAAqCxY,KAArCwY,YAAajZ,EAAwBS,KAAxBT,EAAG0J,EAAqBjJ,KAArBiJ,EAAGvE,EAAkB1E,KAAlB0E,MAAOE,EAAW5E,KAAX4E,MAC3D4T,KACAhU,EAAIkU,YAAcA,EAClBlU,EAAIqU,UAAYL,EAChBhU,EAAIsU,WAAWvZ,EAAG0J,EAAGvE,EAAOE,IAEhCJ,EAAIkT,UAAYA,EAChBlT,EAAIqT,SAAStY,EAAG0J,EAAGvE,EAAOE,OV8/CvBwT,IAGXzb,GAAQ+I,QUphDa0S,GVwhDfW,+BACA,SAAUrc,EAAQC,EAASC,GAEjC,YAgBA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAbhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MWpiDhiBc,EAAAvH,EAAA,yBASqBoc,EXsiDP,WWriDV,QAAAA,GAAA1S,GAAqB,GAAP9B,GAAO8B,EAAP9B,GAAOrB,GAAAnD,KAAAgZ,GACjBhZ,KAAKwE,IAAMA,EACXxE,KAAK4U,MAAQ,EXykDjB,MA5BApR,GAAawV,IACThV,IAAK,SACLT,MAAO,WW5iDF,GACGiB,GAAQxE,KAARwE,GACRA,GAAIsT,KAAJ3T,EAAA8U,gBAAA,MAAA9U,EAAA+U,cAAA,WACA1U,EAAIuT,UAAY,QAChBvT,EAAIwT,aAAe,SACnBxT,EAAIkT,UAAJvT,EAAAgV,iBACA3U,EAAI0T,SAASpH,OAAO9Q,KAAK4U,OAAQzQ,EAAAiV,YAAAjV,EAAAkV,aAA4BlV,EAAAmV,WAAanV,EAAA+U,cAAgB,MXgjD1FlV,IAAK,QACLT,MAAO,WW7iDPvD,KAAK4U,MAAQ,KXijDb5Q,IAAK,SACLT,MAAO,WW9iDPvD,KAAK4U,OAAS,KXkjDd5Q,IAAK,aACLT,MAAO,WW/iDP,MAAOvD,MAAK4U,UXojDToE,IAGXrc,GAAQ+I,QW/kDasT,GXmlDfO,4BACA,SAAU7c,EAAQC,EAASC,GAEjC,YAeA,SAASgJ,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQH,QAASG,GAEvF,QAAS1C,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAdhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,GAGX,IAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,MYtmDhiBmW,EAAA5c,EAAA,6CZ0mDI6c,EAAiB7T,EAAuB4T,GYxmD5CrV,EAAAvH,EAAA,yBAUqB8c,EZsmDV,WYrmDP,QAAAA,GAAApT,GAA4F,GAA9E9B,GAA8E8B,EAA9E9B,IAAKE,EAAyE4B,EAAzE5B,MAAOE,EAAkE0B,EAAlE1B,OAAQiM,EAA0DvK,EAA1DuK,KAAME,EAAoDzK,EAApDyK,KAAML,EAA8CpK,EAA9CoK,SAAUE,EAAoCtK,EAApCsK,SAAoC+I,EAAArT,EAA1B8E,SAA0B1I,SAAAiX,EAAjB,EAAiBA,EAAAC,EAAAtT,EAAd+E,SAAc3I,SAAAkX,EAAL,EAAKA,CAAAzW,GAAAnD,KAAA0Z,GACxF1Z,KAAKwE,IAAMA,EACXxE,KAAK0E,MAAQA,EACb1E,KAAK4E,OAASA,EACd5E,KAAKwY,YAALrU,EAAA0V,gBACA7Z,KAAK0Y,YAALvU,EAAA2V,gBACA9Z,KAAK6Q,KAAOA,EACZ7Q,KAAK+Q,KAAOA,EACZ/Q,KAAK0Q,SAAWA,EAChB1Q,KAAK4Q,SAAWA,EAChB5Q,KAAKoL,OAASA,EACdpL,KAAKqL,OAASA,EACdrL,KAAK0X,UAAYvT,EAAA4V,WAAWjc,KAAKkc,IAAItJ,EAAUE,IAG/C5Q,KAAKia,QAAS,EAAAR,EAAA/T,SAAmB,GAAK,EAAG,EAAG,GAC5C1F,KAAKka,kBAAoB,IZguD7B,MAzGA1W,GAAakW,IACT1V,IAAK,kBACLT,MAAO,WYtnDO,GACNiB,GAAmFxE,KAAnFwE,IAAKkT,EAA8E1X,KAA9E0X,UAAWc,EAAmExY,KAAnEwY,YAAa9T,EAAsD1E,KAAtD0E,MAAOE,EAA+C5E,KAA/C4E,OAAQ8L,EAAuC1Q,KAAvC0Q,SAAUE,EAA6B5Q,KAA7B4Q,SAAUxF,EAAmBpL,KAAnBoL,OAAQC,EAAWrL,KAAXqL,OADlE8O,GAEG,EAAAhW,EAAAiW,kBAAkBxJ,WAAUF,aAArCnR,EAFM4a,EAEN5a,EAAG0J,EAFGkR,EAEHlR,CACXzE,GAAIkT,UAAYA,EAChBlT,EAAIqT,SAAStY,EAAI6L,EAAQnC,EAAIoC,EAAQ3G,EAAOE,GAExC4T,IACAhU,EAAIqU,UAAYL,EAChBhU,EAAIkU,YAAcA,YAClBlU,EAAIsU,WAAWvZ,EAAG0J,EAAGvE,EAAOE,OZsoDhCZ,IAAK,mBACLT,MAAO,WYnoDQ,GACPiB,GAAsGxE,KAAtGwE,IAAKkU,EAAiG1Y,KAAjG0Y,YAAahB,EAAoF1X,KAApF0X,UAAWc,EAAyExY,KAAzEwY,YAAa9T,EAA4D1E,KAA5D0E,MAAOE,EAAqD5E,KAArD4E,OAAQiM,EAA6C7Q,KAA7C6Q,KAAMH,EAAuC1Q,KAAvC0Q,SAAUE,EAA6B5Q,KAA7B4Q,SAAUxF,EAAmBpL,KAAnBoL,OAAQC,EAAWrL,KAAXqL,OADpFgP,GAEE,EAAAlW,EAAAiW,kBAAkBxJ,WAAUF,aAArCnR,EAFO8a,EAEP9a,EAAG0J,EAFIoR,EAEJpR,CACXzE,GAAIkT,UAAYA,EAChBlT,EAAIqT,SAAStY,EAAI6L,EAAQnC,EAAIoC,EAAQ3G,EAAOE,GAExC4T,IACAhU,EAAIqU,UAAYL,EAChBhU,EAAIkU,YAAcA,EAClBlU,EAAIsU,WAAWvZ,EAAG0J,EAAGvE,EAAOE,IAGhCJ,EAAIsT,KAAO,aACXtT,EAAIuT,UAAY,SAChBvT,EAAIwT,aAAe,SACnBxT,EAAIkT,UAAJvT,EAAAmW,cACA9V,EAAI0T,SAASrH,EAAMtR,EAAI6L,EAAS1G,EAAQ,EAAGuE,EAAIoC,EAASzG,EAAS,MZopDjEZ,IAAK,SACLT,MAAO,WYlpDF,GACGwN,GAAS/Q,KAAT+Q,IACR,OAAIA,KAAS5M,EAAA6M,UAAUC,MACZjR,KAAKua,kBAETva,KAAKwa,sBZspDZxW,IAAK,SACLT,MAAO,WYnpDPvD,KAAKya,0BZupDLzW,IAAK,yBACLT,MAAO,WYppDPvD,KAAK0a,oBAAqB,EAAAvW,EAAAgR,UAC1BnV,KAAK2a,qBAAuB3a,KAAKoL,OACjCpL,KAAK4a,qBAAuB5a,KAAKqL,OACjCrL,KAAK6a,oBAAsB7a,KAAK0E,MAChC1E,KAAK8a,qBAAuB9a,KAAK4E,UZwpDjCZ,IAAK,uBACLT,MAAO,WYrpDP,GAAIvD,KAAK0a,mBAAoB,CACzB,GAAMK,KAAY,EAAA5W,EAAAgR,UAAWnV,KAAK0a,oBAAsB1a,KAAKka,iBAC7Dla,MAAKoL,OAASpL,KAAK2a,sBAAwB,EAAI3a,KAAKia,OAAOc,IAC3D/a,KAAKqL,OAASrL,KAAK4a,sBAAwB,EAAI5a,KAAKia,OAAOc,IACvDA,GAAY,IAEZ/a,KAAKoL,OAAS,EACdpL,KAAKqL,OAAS,EACdrL,KAAK0a,mBAAqB,KAC1B1a,KAAK2a,qBAAuB,KAC5B3a,KAAK4a,qBAAuB,KAC5B5a,KAAK6a,oBAAsB,KAC3B7a,KAAK8a,qBAAuB,WZ4pDjCpB,IAGX/c,GAAQ+I,QYpvDagU,GZwvDfsB,6BACA,SAAUte,EAAQC,EAASC,GAEjC,YAeA,SAASuG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIjD,WAAU,qCAZhHS,OAAOyC,eAAe3G,EAAS,cAC3B4G,OAAO,IAEX5G,EAAQyZ,WAAa1T,MAErB,IAAIc,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9F,GAAI,EAAGA,EAAI8F,EAAM9B,OAAQhE,IAAK,CAAE,GAAI+F,GAAaD,EAAM9F,EAAI+F,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMlD,OAAOyC,eAAeI,EAAQE,EAAWI,IAAKJ,IAAiB,MAAO,UAAUP,EAAaY,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBJ,EAAYvC,UAAWmD,GAAiBC,GAAaT,EAAiBJ,EAAaa,GAAqBb,Ma1wDhiBc,EAAAvH,EAAA,yBAEMqe,EAAM,SAACC,EAAQrZ,GACjB,KAAOA,EAASqZ,EAAOrZ,OAAS,GAC5BqZ,EAAS,IAAMA,CAEnB,OAAOA,IAGE9E,eAAa,SAAC1B,GACvB,GAAMyG,GAAezG,EAAO,IACtB0G,GAAW1G,EAAOyG,GAAgB,IAAO,GACzCE,IAAY3G,EAAOyG,GAAgB,IAAOC,GAAW,EAC3D,OAAUC,GAAV,IAAqBJ,EAAInK,OAAOsK,GAAU,GAA1C,IAAgDH,EAAInK,OAAOqK,GAAe,IAGzDG,EbixDT,Wa/wDR,QAAAA,GAAAhV,GAAqB,GAAP9B,GAAO8B,EAAP9B,GAAOrB,GAAAnD,KAAAsb,GACjBtb,KAAKwE,IAAMA,EACXxE,KAAK0U,KAAO,EACZ1U,KAAKub,aAAe,Kbm0DxB,MA5CA/X,GAAa8X,IACTtX,IAAK,SACLT,MAAO,WatxDF,GACGiB,GAAQxE,KAARwE,GACRA,GAAIsT,KAAJ3T,EAAAqX,cAAA,MAAArX,EAAAsX,YAAA,WACAjX,EAAIuT,UAAY,OAChBvT,EAAIwT,aAAe,SACnBxT,EAAIkT,UAAJvT,EAAAuX,eACAlX,EAAI0T,SAAS9B,EAAWpW,KAAK0U,MAA7BvQ,EAAAwX,UAA+CxX,EAAAyX,SAAWzX,EAAAsX,YAAc,Mb0xDxEzX,IAAK,QACLT,MAAO,WavxDFvD,KAAKub,eACNvb,KAAK0U,KAAO,EACZ1U,KAAKub,cAAe,EAAApX,EAAAgR,cb4xDxBnR,IAAK,OACLT,MAAO,WaxxDPvD,KAAKub,aAAe,Qb4xDpBvX,IAAK,QACLT,MAAO,WazxDPvD,KAAK0U,KAAO,EACZ1U,KAAKub,aAAe,Qb6xDpBvX,IAAK,SACLT,MAAO,Wa1xDHvD,KAAKub,eACLvb,KAAK0U,MAAO,EAAAvQ,EAAAgR,UAAWnV,KAAKub,iBb+xDhCvX,IAAK,UACLT,MAAO,Wa3xDP,MAAOvD,MAAK0U,SbgyDT4G,IAGX3e,GAAQ+I,Qa30Da4V,Gb+0DfO,0BACA,SAAUnf,EAAQC,EAASC,Gcl2DjC,GAAAkf,GAAAlf,EAAA,uGACA,iBAAAkf,SAAApf,EAAAmB,EAAAie,EAAA,KAEAlf,GAAA,4CAAAkf,KACAA,GAAAC,SAAArf,EAAAC,QAAAmf,EAAAC,Sdw3DMC,EACA,SAAUtf,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,6BAKlC","file":"js/index.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ \"./node_modules/bezier-easing/src/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A(aA1, aA2) {\n  return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n}\nfunction B(aA1, aA2) {\n  return 3.0 * aA2 - 6.0 * aA1;\n}\nfunction C(aA1) {\n  return 3.0 * aA1;\n}\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier(aT, aA1, aA2) {\n  return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n}\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope(aT, aA1, aA2) {\n  return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n}\n\nfunction binarySubdivide(aX, aA, aB, mX1, mX2) {\n  var currentX,\n      currentT,\n      i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n  for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n    var currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) {\n      return aGuessT;\n    }\n    var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n  return aGuessT;\n}\n\nmodule.exports = function bezier(mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (var i = 0; i < kSplineTableSize; ++i) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing(x) {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // linear\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n\n/***/ }),\n\n/***/ \"./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss\":\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(\"./node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.i, \"/**\\n * @since 2017-02-20 10:27\\n * @author vivaxy\\n */\\n\\n:root {\\n}\\n\\n* {\\n    -webkit-tap-highlight-color: transparent;\\n}\\n\\nhtml {\\n    height: 100%;\\n    box-sizing: border-box;\\n}\\n\\nbody {\\n    margin: 0;\\n    height: 100%;\\n    position: relative;\\n}\\n\\ncanvas {\\n    display: block;\\n    background-color: #ffffff;\\n    position: absolute;\\n}\\n\\n.score-container {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(0, 0, 0, 0.9);\\n    color: #fff;\\n    font-size: 12px;\\n    display: none;\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: column;\\n            flex-direction: column;\\n    padding: 60px 20px;\\n}\\n\\n.score-container .score-tab {\\n    -webkit-box-flex: 0;\\n        -ms-flex: none;\\n            flex: none;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    text-align: center;\\n    height: 30px;\\n    line-height: 30px;\\n    margin-bottom: 30px;\\n}\\n\\n.score-container .score-tab .score-tab-item {\\n    -webkit-box-flex: 1;\\n        -ms-flex: 1;\\n            flex: 1;\\n    border-bottom: 1px solid transparent;\\n}\\n\\n.score-container .score-tab .score-tab-item[data-active] {\\n    border-bottom-color: #fff;\\n}\\n\\n.score-container .score-list {\\n    -webkit-box-flex: 1;\\n        -ms-flex: 1;\\n            flex: 1;\\n    overflow-y: auto;\\n}\\n\\n.score-container .score-list ul {\\n    margin: 0;\\n    padding: 0;\\n}\\n\\n.score-container .score-list ul li {\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    margin-bottom: 10px;\\n}\\n\\n.score-container .score-list ul li div {\\n    display: inline-block;\\n    height: 20px;\\n    line-height: 20px;\\n}\\n\\n.score-container .score-list ul li .index {\\n    width: 5%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .username {\\n    width: 35%;\\n    text-indent: 10px;\\n}\\n\\n.score-container .score-list ul li .steps {\\n    width: 10%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .time {\\n    width: 15%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .timestamp {\\n    width: 35%;\\n    text-align: right;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ \"./node_modules/eventemitter3/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar has = Object.prototype.hasOwnProperty,\n    prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once),\n      evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = [],\n      events,\n      name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in events = this._events) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event,\n      handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event,\n      listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt],\n      len = arguments.length,\n      args,\n      i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1:\n        return listeners.fn.call(listeners.context), true;\n      case 2:\n        return listeners.fn.call(listeners.context, a1), true;\n      case 3:\n        return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4:\n        return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6:\n        return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len - 1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length,\n        j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1:\n          listeners[i].fn.call(listeners[i].context);break;\n        case 2:\n          listeners[i].fn.call(listeners[i].context, a1);break;\n        case 3:\n          listeners[i].fn.call(listeners[i].context, a1, a2);break;\n        case 4:\n          listeners[i].fn.call(listeners[i].context, a1, a2, a3);break;\n        default:\n          if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif (true) {\n  module.exports = EventEmitter;\n}\n\n/***/ }),\n\n/***/ \"./src/entries/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(\"./src/main/index.js\");\n\nif (false) {\n    module.hot.accept('../main', function () {\n        location.reload();\n    });\n} /**\n   * @since 2017-02-20 10:25\n   * @author vivaxy\n   */\n\n/***/ }),\n\n/***/ \"./src/main/canvas.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Canvas = function () {\n    function Canvas() {\n        _classCallCheck(this, Canvas);\n\n        var canvas = document.querySelector('.js-canvas');\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.width = _configs.canvasWidth;\n        this.height = _configs.canvasHeight;\n        canvas.width = _configs.canvasWidth;\n        canvas.height = _configs.canvasHeight;\n        this.styles = {\n            width: window.innerWidth,\n            height: window.innerHeight,\n            top: 0,\n            left: 0\n        };\n        this.updatePosition();\n    }\n\n    _createClass(Canvas, [{\n        key: 'updatePosition',\n        value: function updatePosition() {\n            var canvas = this.canvas,\n                width = this.width,\n                height = this.height,\n                styles = this.styles;\n\n            if (width / height > window.innerWidth / window.innerHeight) {\n                // canvas is much wider, fit canvas width to window width\n                styles.width = window.innerWidth;\n                styles.height = window.innerWidth * height / width;\n            } else {\n                styles.height = window.innerHeight;\n                styles.width = window.innerHeight * width / height;\n            }\n            styles.top = (window.innerHeight - styles.height) / 2;\n            styles.left = (window.innerWidth - styles.width) / 2;\n            Object.keys(styles).forEach(function (styleKey) {\n                canvas.style[styleKey] = styles[styleKey] + 'px';\n            });\n        }\n    }, {\n        key: 'getCtx',\n        value: function getCtx() {\n            return this.ctx;\n        }\n    }, {\n        key: 'getCanvas',\n        value: function getCanvas() {\n            return this.canvas;\n        }\n    }, {\n        key: 'clear',\n        value: function clear() {\n            this.ctx.clearRect(0, 0, this.width, this.height);\n        }\n    }]);\n\n    return Canvas;\n}();\n\nexports.default = Canvas;\n\n/***/ }),\n\n/***/ \"./src/main/index.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @since 2017-03-17 13:57:46\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author vivaxy\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n__webpack_require__(\"./src/styles/index.pcss\");\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nvar _canvas = __webpack_require__(\"./src/main/canvas.js\");\n\nvar _canvas2 = _interopRequireDefault(_canvas);\n\nvar _puzzle = __webpack_require__(\"./src/main/puzzle.js\");\n\nvar _puzzle2 = _interopRequireDefault(_puzzle);\n\nvar _input = __webpack_require__(\"./src/main/input.js\");\n\nvar _input2 = _interopRequireDefault(_input);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n    function Game() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            _ref$row = _ref.row,\n            row = _ref$row === undefined ? 4 : _ref$row,\n            _ref$col = _ref.col,\n            col = _ref$col === undefined ? 4 : _ref$col;\n\n        _classCallCheck(this, Game);\n\n        var canvas = new _canvas2.default();\n        var input = new _input2.default({ canvas: canvas.getCanvas() });\n        var puzzle = new _puzzle2.default({ ctx: canvas.getCtx(), row: row, col: col, input: input });\n        this.canvas = canvas;\n        this.puzzle = puzzle;\n        // disable scroll. // weixin need this\n        document.body.addEventListener(_configs.browserEvents.TOUCH_MOVE, function (e) {\n            e.preventDefault();\n        }, { passive: false });\n        input.on(_configs.events.RESIZE_CANVAS, function () {\n            canvas.updatePosition();\n        });\n    }\n\n    _createClass(Game, [{\n        key: 'render',\n        value: function render() {\n            var puzzle = this.puzzle,\n                canvas = this.canvas;\n\n            canvas.clear();\n            puzzle.render();\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            var puzzle = this.puzzle;\n\n            puzzle.update();\n        }\n    }, {\n        key: 'loop',\n        value: function loop() {\n            var _this = this;\n\n            this.update();\n            this.render();\n            requestAnimationFrame(function () {\n                _this.loop();\n            });\n        }\n    }, {\n        key: 'start',\n        value: function start() {\n            this.loop();\n            this.puzzle.scramble();\n            this.puzzle.puzzleStatus = _configs.puzzleStatusCodes.READY;\n        }\n    }]);\n\n    return Game;\n}();\n\nnew Game().start();\n\n/***/ }),\n\n/***/ \"./src/main/input.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _eventemitter = __webpack_require__(\"./node_modules/eventemitter3/index.js\");\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar getCoords = function getCoords(e) {\n    if (e.changedTouches) {\n        return {\n            x: (0, _configs.mapPointToCanvas)(e.changedTouches[0].clientX - e.target.offsetLeft),\n            y: (0, _configs.mapPointToCanvas)(e.changedTouches[0].clientY - e.target.offsetTop)\n        };\n    }\n    return {\n        x: (0, _configs.mapPointToCanvas)(e.clientX - e.target.offsetLeft),\n        y: (0, _configs.mapPointToCanvas)(e.clientY - e.target.offsetTop)\n    };\n};\n\nvar Input = function (_EventEmitter) {\n    _inherits(Input, _EventEmitter);\n\n    function Input(_ref) {\n        var canvas = _ref.canvas;\n\n        _classCallCheck(this, Input);\n\n        var _this = _possibleConstructorReturn(this, (Input.__proto__ || Object.getPrototypeOf(Input)).call(this));\n\n        _this.start = function (e) {\n            var point = getCoords(e);\n            _this.resetPoint(point);\n        };\n\n        _this.move = function (e) {\n            var point = getCoords(e);\n            _this.pointX = point.x;\n            _this.pointY = point.y;\n            _this.tryMove();\n        };\n\n        _this.end = function () {\n            _this.resetPoint(_this.invalidPoint);\n            _this.emit(_configs.events.RESET_SPACE_TILE);\n        };\n\n        _this.click = function (e) {\n            _this.emit(_configs.events.CLICK, getCoords(e));\n        };\n\n        _this.resize = function () {\n            _this.emit(_configs.events.RESIZE_CANVAS);\n        };\n\n        _this.orientationChange = function () {\n            _this.emit(_configs.events.RESIZE_CANVAS);\n        };\n\n        _this.canvas = canvas;\n\n        _this.invalidPoint = { x: null, y: null };\n        _this.resetPoint(_this.invalidPoint);\n\n        _this.initialize();\n        return _this;\n    }\n\n    _createClass(Input, [{\n        key: 'initialize',\n        value: function initialize() {\n            var canvas = this.canvas;\n\n            var element = document.body;\n            element.addEventListener(_configs.browserEvents.TOUCH_START, this.start, { passive: true });\n            element.addEventListener(_configs.browserEvents.TOUCH_MOVE, this.move, { passive: true });\n            element.addEventListener(_configs.browserEvents.TOUCH_END, this.end, { passive: true });\n            element.addEventListener(_configs.browserEvents.TOUCH_CANCEL, this.end, { passive: true });\n            canvas.addEventListener(_configs.browserEvents.CLICK, this.click, { passive: true });\n            window.addEventListener(_configs.browserEvents.RESIZE, this.resize, { passive: true });\n            window.addEventListener(_configs.browserEvents.ORIENTATION_CHANGE, this.orientationChange, { passive: true });\n        }\n    }, {\n        key: 'getDirection',\n        value: function getDirection() {\n            var xMovement = Math.abs(this.startPointX - this.pointX);\n            var yMovement = Math.abs(this.startPointY - this.pointY);\n            if (xMovement > yMovement) {\n                if (this.pointX - this.startPointX > 0) {\n                    return _configs.directions.RIGHT;\n                } else {\n                    return _configs.directions.LEFT;\n                }\n            } else {\n                if (this.pointY - this.startPointY > 0) {\n                    return _configs.directions.DOWN;\n                } else {\n                    return _configs.directions.UP;\n                }\n            }\n        }\n    }, {\n        key: 'tryMove',\n        value: function tryMove() {\n            var xMovement = this.pointX - this.startPointX;\n            var yMovement = this.pointY - this.startPointY;\n            var point = { deltaX: xMovement, deltaY: yMovement, x: this.pointX, y: this.pointY };\n            var direction = this.getDirection();\n            this.emit(_configs.events.TRY_MOVE, direction, point);\n        }\n    }, {\n        key: 'setStartPoint',\n        value: function setStartPoint(_ref2) {\n            var _ref2$x = _ref2.x,\n                x = _ref2$x === undefined ? this.startPointX : _ref2$x,\n                _ref2$y = _ref2.y,\n                y = _ref2$y === undefined ? this.startPointY : _ref2$y;\n\n            this.startPointX = x;\n            this.startPointY = y;\n        }\n    }, {\n        key: 'moveStartPoint',\n        value: function moveStartPoint(_ref3) {\n            var x = _ref3.x,\n                y = _ref3.y;\n\n            this.startPointX += x;\n            this.startPointY += y;\n        }\n    }, {\n        key: 'resetPoint',\n        value: function resetPoint(_ref4) {\n            var x = _ref4.x,\n                y = _ref4.y;\n\n            this.startPointX = x;\n            this.startPointY = y;\n            this.pointX = x;\n            this.pointY = y;\n        }\n    }]);\n\n    return Input;\n}(_eventemitter.EventEmitter);\n\nexports.default = Input;\n;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _fingerprintjs = __webpack_require__(\"./node_modules/fingerprintjs2/dist/fingerprint2.min.js\");\n\nvar _fingerprintjs2 = _interopRequireDefault(_fingerprintjs);\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nvar _grid = __webpack_require__(\"./src/main/puzzle/grid.js\");\n\nvar _grid2 = _interopRequireDefault(_grid);\n\nvar _tile = __webpack_require__(\"./src/main/puzzle/tile.js\");\n\nvar _tile2 = _interopRequireDefault(_tile);\n\nvar _buttons = __webpack_require__(\"./src/main/puzzle/buttons.js\");\n\nvar _buttons2 = _interopRequireDefault(_buttons);\n\nvar _timer = __webpack_require__(\"./src/main/puzzle/timer.js\");\n\nvar _timer2 = _interopRequireDefault(_timer);\n\nvar _stepper = __webpack_require__(\"./src/main/puzzle/stepper.js\");\n\nvar _stepper2 = _interopRequireDefault(_stepper);\n\nvar _fetch = __webpack_require__(\"./src/lib/fetch.js\");\n\nvar _fetch2 = _interopRequireDefault(_fetch);\n\nvar _getUsername = __webpack_require__(\"./src/lib/getUsername.js\");\n\nvar _getUsername2 = _interopRequireDefault(_getUsername);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar scoreNames = {\n    userTopStepsList: 'My Steps',\n    userTopTimeList: 'My Time',\n    globalTopStepsList: 'World Steps',\n    globalTopTimeList: 'World Time'\n};\nvar scoreKeys = ['username', 'steps', 'time', 'timestamp'];\n\nvar whenDirection = function whenDirection(direction) {\n    return function (options) {\n        return Object.keys(options).map(function (directionKey) {\n            if (directionKey.toUpperCase() === direction) {\n                return options[directionKey]();\n            }\n        });\n    };\n};\n\nvar Puzzle = function () {\n    function Puzzle(_ref) {\n        var ctx = _ref.ctx,\n            row = _ref.row,\n            col = _ref.col,\n            input = _ref.input;\n\n        _classCallCheck(this, Puzzle);\n\n        this.ctx = ctx;\n        this.row = row;\n        this.col = col;\n        this.input = input;\n\n        this.grid = new _grid2.default({ ctx: ctx });\n        this.buttons = new _buttons2.default({ ctx: ctx });\n        this.timer = new _timer2.default({ ctx: ctx });\n        this.stepper = new _stepper2.default({ ctx: ctx });\n\n        this.tileList = this.initializeTileList();\n        this.initializeInput();\n        this.buttons.enable([_configs.buttonTypes.SCRAMBLE]);\n        this.puzzleStatus = _configs.puzzleStatusCodes.SCRAMBLING;\n\n        this.scores = {};\n        this.getScores();\n    }\n\n    _createClass(Puzzle, [{\n        key: 'initializeInput',\n        value: function initializeInput() {\n            var _this = this;\n\n            var scoreContainer = document.querySelector('.js-score-container');\n\n            this.input.on(_configs.events.TRY_MOVE, function (direction, point) {\n                if ([_configs.puzzleStatusCodes.SCRAMBLING, _configs.puzzleStatusCodes.WINNING].includes(_this.puzzleStatus)) {\n                    return;\n                }\n                _this.tryMove(direction, point);\n                whenDirection(direction)({\n                    left: function left() {\n                        if (point.deltaX < -_configs.movementThreshold) {\n                            _this.move(direction, point);\n                        }\n                    },\n                    up: function up() {\n                        if (point.deltaY < -_configs.movementThreshold) {\n                            _this.move(direction, point);\n                        }\n                    },\n                    right: function right() {\n                        if (point.deltaX > _configs.movementThreshold) {\n                            _this.move(direction, point);\n                        }\n                    },\n                    down: function down() {\n                        if (point.deltaY > _configs.movementThreshold) {\n                            _this.move(direction, point);\n                        }\n                    }\n                });\n            });\n            this.input.on(_configs.events.RESET_SPACE_TILE, function () {\n                var tile = _this.findSpaceTile();\n                tile.animateToResetPosition();\n            });\n            this.input.on(_configs.events.CLICK, function (point) {\n                var buttonAction = _this.buttons.hitButton(point);\n                switch (buttonAction) {\n                    case _configs.buttonTypes.SCRAMBLE:\n                        _this.puzzleStatus = _configs.puzzleStatusCodes.SCRAMBLING;\n                        _this.timer.reset();\n                        _this.stepper.reset();\n                        _this.scramble();\n                        _this.puzzleStatus = _configs.puzzleStatusCodes.READY;\n                        _this.buttons.enable([_configs.buttonTypes.SCRAMBLE]);\n                        break;\n                    case _configs.buttonTypes.SHOW_SCORE:\n                        scoreContainer.style.display = 'flex';\n                        _this.buttons.enable([_configs.buttonTypes.SHOW_SCORE]);\n                        break;\n                }\n            });\n\n            scoreContainer.addEventListener(_configs.browserEvents.TOUCH_START, function (e) {\n                e.stopPropagation();\n            });\n            scoreContainer.addEventListener(_configs.browserEvents.TOUCH_MOVE, function (e) {\n                e.stopPropagation();\n            });\n            scoreContainer.addEventListener(_configs.browserEvents.TOUCH_END, function (e) {\n                e.stopPropagation();\n            });\n            scoreContainer.addEventListener(_configs.browserEvents.TOUCH_CANCEL, function (e) {\n                e.stopPropagation();\n            });\n            scoreContainer.addEventListener(_configs.browserEvents.CLICK, function () {\n                scoreContainer.style.display = 'none';\n            });\n        }\n    }, {\n        key: 'initializeTileList',\n        value: function initializeTileList() {\n            var ctx = this.ctx,\n                col = this.col,\n                row = this.row;\n\n            var width = _configs.tileSize;\n            var height = _configs.tileSize;\n            return Array.from({ length: row }, function (rowItem, rowIndex) {\n                return Array.from({ length: col }, function (colItem, colIndex) {\n                    return new _tile2.default({\n                        ctx: ctx,\n                        width: width,\n                        height: height,\n                        colIndex: colIndex,\n                        rowIndex: rowIndex,\n                        text: String(rowIndex * row + colIndex + 1),\n                        type: colIndex === col - 1 && rowIndex === row - 1 ? _configs.tileTypes.SPACE : _configs.tileTypes.NORMAL\n                    });\n                });\n            });\n        }\n    }, {\n        key: 'tryMove',\n        value: function tryMove(direction, point) {\n            var tile = this.findSpaceTile();\n            if (tile.colIndex >= _configs.size - 1 && point.deltaX > 0) {\n                this.input.setStartPoint({ x: tile.x });\n                point.deltaX = 0;\n            }\n            if (tile.colIndex <= 0 && point.deltaX < 0) {\n                this.input.setStartPoint({ x: tile.x });\n                point.deltaX = 0;\n            }\n            if (tile.rowIndex <= 0 && point.deltaY < 0) {\n                this.input.setStartPoint({ y: tile.y });\n                point.deltaY = 0;\n            }\n            if (tile.rowIndex >= _configs.size - 1 && point.deltaY > 0) {\n                this.input.setStartPoint({ y: tile.y });\n                point.deltaY = 0;\n            }\n            tile.deltaX = point.deltaX;\n            tile.deltaY = point.deltaY;\n        }\n    }, {\n        key: 'swapTiles',\n        value: function swapTiles(_ref2, _ref3) {\n            var fromRowIndex = _ref2.rowIndex,\n                fromColIndex = _ref2.colIndex;\n            var toRowIndex = _ref3.rowIndex,\n                toColIndex = _ref3.colIndex;\n\n            var fromTile = this.tileList[fromRowIndex][fromColIndex]; // space tile\n            var toTile = this.tileList[toRowIndex][toColIndex]; // the other tile\n\n            // swap\n            this.tileList[fromRowIndex][fromColIndex] = toTile;\n            this.tileList[toRowIndex][toColIndex] = fromTile;\n            fromTile.rowIndex = toRowIndex;\n            fromTile.colIndex = toColIndex;\n            toTile.rowIndex = fromRowIndex;\n            toTile.colIndex = fromColIndex;\n\n            var deltaX = fromTile.deltaX;\n            var deltaY = fromTile.deltaY;\n            fromTile.deltaX = (fromColIndex - toColIndex) * (_configs.tileSize + _configs.tileSpacing) + deltaX;\n            fromTile.deltaY = (fromRowIndex - toRowIndex) * (_configs.tileSize + _configs.tileSpacing) + deltaY;\n            toTile.deltaX = (toColIndex - fromColIndex) * (_configs.tileSize + _configs.tileSpacing);\n            toTile.deltaY = (toRowIndex - fromRowIndex) * (_configs.tileSize + _configs.tileSpacing);\n            toTile.animateToResetPosition();\n            this.input.moveStartPoint({\n                x: (toColIndex - fromColIndex) * (_configs.tileSize + _configs.tileSpacing),\n                y: (toRowIndex - fromRowIndex) * (_configs.tileSize + _configs.tileSpacing)\n            });\n            if (this.puzzleStatus === _configs.puzzleStatusCodes.READY) {\n                this.timer.start();\n                this.puzzleStatus = _configs.puzzleStatusCodes.STARTED;\n            }\n            if (this.puzzleStatus === _configs.puzzleStatusCodes.STARTED) {\n                this.checkWinning();\n                this.stepper.update();\n            }\n        }\n    }, {\n        key: 'move',\n        value: function move(direction, point) {\n            var _this2 = this;\n\n            var _findSpaceTile = this.findSpaceTile(),\n                rowIndex = _findSpaceTile.rowIndex,\n                colIndex = _findSpaceTile.colIndex;\n\n            whenDirection(direction)({\n                left: function left() {\n                    if (colIndex <= 0) {\n                        _this2.input.resetPoint(point);\n                        return;\n                    }\n                    // move left\n                    _this2.swapTiles({ rowIndex: rowIndex, colIndex: colIndex }, { rowIndex: rowIndex, colIndex: colIndex - 1 });\n                },\n                up: function up() {\n                    if (rowIndex <= 0) {\n                        _this2.input.resetPoint(point);\n                        return;\n                    }\n                    // move up\n                    _this2.swapTiles({ rowIndex: rowIndex, colIndex: colIndex }, { rowIndex: rowIndex - 1, colIndex: colIndex });\n                },\n                right: function right() {\n                    if (colIndex >= _this2.col - 1) {\n                        _this2.input.resetPoint(point);\n                        return;\n                    }\n                    // move right\n                    _this2.swapTiles({ rowIndex: rowIndex, colIndex: colIndex }, { rowIndex: rowIndex, colIndex: colIndex + 1 });\n                },\n                down: function down() {\n                    if (rowIndex >= _this2.row - 1) {\n                        _this2.input.resetPoint(point);\n                        return;\n                    }\n                    // move down\n                    _this2.swapTiles({ rowIndex: rowIndex, colIndex: colIndex }, { rowIndex: rowIndex + 1, colIndex: colIndex });\n                }\n            });\n        }\n    }, {\n        key: 'findSpaceTile',\n        value: function findSpaceTile() {\n            var tileList = this.tileList;\n\n            return tileList.reduce(function (result, tileRow) {\n                return result || tileRow.reduce(function (tileResult, tile) {\n                    if (tile.type === _configs.tileTypes.SPACE) {\n                        return tile;\n                    }\n                    return tileResult;\n                }, null);\n            }, null);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var grid = this.grid,\n                tileList = this.tileList,\n                buttons = this.buttons,\n                timer = this.timer,\n                stepper = this.stepper;\n\n            var renders = tileList.reduce(function (_ref4, tileRow) {\n                var accRowList = _ref4.list,\n                    accRowSpaceTile = _ref4.spaceTile;\n\n                var _tileRow$reduce = tileRow.reduce(function (_ref5, tile) {\n                    var list = _ref5.list,\n                        spaceTile = _ref5.spaceTile;\n\n                    if (tile.type !== _configs.tileTypes.SPACE) {\n                        return { list: [].concat(_toConsumableArray(list), [tile]), spaceTile: spaceTile };\n                    } else {\n                        return { list: list, spaceTile: tile };\n                    }\n                }, { list: [], spaceTile: null }),\n                    rowList = _tileRow$reduce.list,\n                    rowSpaceTile = _tileRow$reduce.spaceTile;\n\n                return { list: [].concat(_toConsumableArray(accRowList), _toConsumableArray(rowList)), spaceTile: accRowSpaceTile || rowSpaceTile };\n            }, { list: [], spaceTile: null });\n            grid.render();\n            renders.spaceTile.render();\n            renders.list.map(function (tile) {\n                tile.render();\n            });\n            buttons.render();\n            timer.render();\n            stepper.render();\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            this.tileList.forEach(function (tileRow) {\n                tileRow.forEach(function (tile) {\n                    tile.update();\n                });\n            });\n            this.timer.update();\n        }\n    }, {\n        key: 'scramble',\n        value: function scramble() {\n            var _this3 = this;\n\n            var directionKeys = Object.keys(_configs.directions);\n            Array.from({ length: 1000 }, function () {\n                return _configs.directions[directionKeys[Math.floor(Math.random() * directionKeys.length)]];\n            }).map(function (direction) {\n                return _this3.move(direction, { x: 0, y: 0 });\n            });\n            var tile = this.findSpaceTile();\n            tile.animateToResetPosition();\n        }\n    }, {\n        key: 'checkWinning',\n        value: function checkWinning() {\n            var row = this.row;\n\n            var winning = this.tileList.every(function (tileRow, rowIndex) {\n                return tileRow.every(function (tile, colIndex) {\n                    return Number(tile.text) === rowIndex * row + colIndex + 1;\n                });\n            });\n            if (winning) {\n                this.puzzleStatus = _configs.puzzleStatusCodes.WINNING;\n                this.timer.stop();\n                this.saveScore();\n            }\n        }\n    }, {\n        key: 'getScores',\n        value: function getScores() {\n            var _this4 = this;\n\n            new _fingerprintjs2.default().get(function () {\n                var _ref6 = _asyncToGenerator(regeneratorRuntime.mark(function _callee(fingerprint) {\n                    return regeneratorRuntime.wrap(function _callee$(_context) {\n                        while (1) {\n                            switch (_context.prev = _context.next) {\n                                case 0:\n                                    _context.next = 2;\n                                    return (0, _fetch2.default)({\n                                        path: '/api/15-puzzle/get-scores',\n                                        data: { fingerprint: fingerprint }\n                                    });\n\n                                case 2:\n                                    _this4.scores = _context.sent;\n\n                                    _this4.updateScoreBoard();\n\n                                case 4:\n                                case 'end':\n                                    return _context.stop();\n                            }\n                        }\n                    }, _callee, _this4);\n                }));\n\n                return function (_x) {\n                    return _ref6.apply(this, arguments);\n                };\n            }());\n        }\n    }, {\n        key: 'saveScore',\n        value: function saveScore() {\n            var _this5 = this;\n\n            var time = this.timer.getTime();\n            var steps = this.stepper.getStepper();\n            new _fingerprintjs2.default().get(function () {\n                var _ref7 = _asyncToGenerator(regeneratorRuntime.mark(function _callee2(fingerprint) {\n                    var username, timestamp;\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                        while (1) {\n                            switch (_context2.prev = _context2.next) {\n                                case 0:\n                                    username = (0, _getUsername2.default)({ fingerprint: fingerprint });\n                                    timestamp = (0, _configs.getNow)();\n                                    _context2.next = 4;\n                                    return (0, _fetch2.default)({\n                                        path: '/api/15-puzzle/add-score',\n                                        data: { username: username, time: time, steps: steps, fingerprint: fingerprint, timestamp: timestamp }\n                                    });\n\n                                case 4:\n                                    _this5.scores = _context2.sent;\n\n                                    _this5.updateScoreBoard();\n\n                                case 6:\n                                case 'end':\n                                    return _context2.stop();\n                            }\n                        }\n                    }, _callee2, _this5);\n                }));\n\n                return function (_x2) {\n                    return _ref7.apply(this, arguments);\n                };\n            }());\n        }\n    }, {\n        key: 'updateScoreBoard',\n        value: function updateScoreBoard() {\n            var _this6 = this;\n\n            var scoreContainer = document.querySelector('.js-score-container');\n            scoreContainer.innerHTML = '';\n            var scoreTab = document.createElement('div');\n            scoreTab.setAttribute('class', 'score-tab');\n            var scoreList = document.createElement('div');\n            scoreList.setAttribute('class', 'score-list');\n            Object.keys(scoreNames).forEach(function (scoreKey) {\n                var tab = document.createElement('div');\n                tab.innerHTML = scoreNames[scoreKey];\n                tab.setAttribute('class', 'score-tab-item');\n                scoreTab.appendChild(tab);\n\n                var ul = document.createElement('ul');\n                var scores = _this6.scores[scoreKey];\n\n                var titleLi = document.createElement('li');\n\n                var index = document.createElement('div');\n                index.setAttribute('class', 'index');\n                index.innerHTML = '';\n                titleLi.appendChild(index);\n\n                scoreKeys.forEach(function (key) {\n                    var element = document.createElement('div');\n                    element.setAttribute('class', key);\n                    element.innerHTML = key;\n                    titleLi.appendChild(element);\n                });\n                ul.appendChild(titleLi);\n\n                scores.forEach(function (scoreItem, scoreIndex) {\n                    var li = document.createElement('li');\n\n                    var index = document.createElement('div');\n                    index.setAttribute('class', 'index');\n                    index.innerHTML = scoreIndex + 1;\n                    li.appendChild(index);\n\n                    scoreKeys.forEach(function (key) {\n                        var element = document.createElement('div');\n                        element.setAttribute('class', key);\n                        if (key === 'time') {\n                            element.innerHTML = (0, _timer.formatTime)(scoreItem[key]);\n                        } else if (key === 'timestamp') {\n                            // todo format timestamp\n                            element.innerHTML = scoreItem[key];\n                        } else {\n                            element.innerHTML = scoreItem[key];\n                        }\n                        li.appendChild(element);\n                    });\n                    ul.appendChild(li);\n                });\n                scoreList.appendChild(ul);\n            });\n            scoreContainer.appendChild(scoreTab);\n            scoreContainer.appendChild(scoreList);\n\n            var scoreTabs = Array.from(scoreTab.children);\n            var scoreLists = Array.from(scoreList.children);\n            scoreTabs.forEach(function (tab, index) {\n                if (index === 0) {\n                    tab.setAttribute('data-active', '');\n                    scoreLists.forEach(function (listItem) {\n                        listItem.style.display = 'none';\n                    });\n                    scoreLists[index].style.display = 'block';\n                }\n                tab.addEventListener(_configs.browserEvents.CLICK, function (e) {\n                    e.stopPropagation();\n                    if (!tab.hasAttribute('data-active')) {\n                        scoreTabs.forEach(function (tabItem) {\n                            tabItem.removeAttribute('data-active');\n                        });\n                        tab.setAttribute('data-active', '');\n                        scoreLists.forEach(function (listItem) {\n                            listItem.style.display = 'none';\n                        });\n                        scoreLists[index].style.display = 'block';\n                    }\n                });\n            });\n        }\n    }]);\n\n    return Puzzle;\n}();\n\nexports.default = Puzzle;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle/buttons.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @since 20180123 13:24\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author vivaxy\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buttons = function () {\n    function Buttons(_ref) {\n        var ctx = _ref.ctx;\n\n        _classCallCheck(this, Buttons);\n\n        this.ctx = ctx;\n        this.buttons = [{ text: 'Scramble', disabled: true, type: _configs.buttonTypes.SCRAMBLE }, { text: 'Scores', disabled: false, type: _configs.buttonTypes.SHOW_SCORE }];\n    }\n\n    _createClass(Buttons, [{\n        key: 'enable',\n        value: function enable(types) {\n            return this.buttons.map(function (button) {\n                if (types.includes(button.type)) {\n                    button.disabled = false;\n                    return true;\n                }\n                return false;\n            });\n        }\n    }, {\n        key: 'hitButton',\n        value: function hitButton(_ref2) {\n            var x = _ref2.x,\n                y = _ref2.y;\n\n            var buttonWidth = (_configs.buttonAreaWidth + _configs.buttonSpacing) / this.buttons.length - _configs.buttonSpacing;\n            var foundButton = this.buttons.find(function (button, index) {\n                var buttonLeft = _configs.buttonAreaLeft + index * (buttonWidth + _configs.buttonSpacing);\n                if (x > buttonLeft && x < buttonLeft + buttonWidth && y > _configs.buttonAreaTop && y < _configs.buttonAreaTop + _configs.buttonAreaHeight) {\n                    if (!button.disabled) {\n                        button.disabled = true;\n                        return true;\n                    }\n                }\n                return false;\n            });\n            if (foundButton) {\n                return foundButton.type;\n            }\n            return null;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var ctx = this.ctx;\n\n            var buttonWidth = (_configs.buttonAreaWidth + _configs.buttonSpacing) / this.buttons.length - _configs.buttonSpacing;\n            this.buttons.forEach(function (button, index) {\n                var x = _configs.buttonAreaLeft + index * (buttonWidth + _configs.buttonSpacing);\n                ctx.fillStyle = button.disabled ? _configs.buttonDisabledBackgroundColor : _configs.buttonBackgroundColor;\n                ctx.fillRect(x, _configs.buttonAreaTop, buttonWidth, _configs.buttonAreaHeight);\n\n                ctx.font = '48px serif';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillStyle = _configs.buttonTextColor;\n                ctx.fillText(button.text, x + buttonWidth / 2, _configs.buttonAreaTop + _configs.buttonAreaHeight / 2);\n            });\n        }\n    }]);\n\n    return Buttons;\n}();\n\nexports.default = Buttons;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle/grid.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Grid = function () {\n    function Grid(_ref) {\n        var ctx = _ref.ctx;\n\n        _classCallCheck(this, Grid);\n\n        this.ctx = ctx;\n        this.x = _configs.gridX;\n        this.y = _configs.gridY;\n        this.width = this.height = _configs.gridSize;\n        this.borderWidth = _configs.gridBorderWidth;\n        this.strokeStyle = _configs.gridBorderColor;\n        this.fillStyle = _configs.gridBackgroundColor;\n    }\n\n    _createClass(Grid, [{\n        key: 'render',\n        value: function render() {\n            var ctx = this.ctx,\n                strokeStyle = this.strokeStyle,\n                fillStyle = this.fillStyle,\n                borderWidth = this.borderWidth,\n                x = this.x,\n                y = this.y,\n                width = this.width,\n                height = this.height;\n\n            if (borderWidth) {\n                ctx.strokeStyle = strokeStyle;\n                ctx.lineWidth = borderWidth;\n                ctx.strokeRect(x, y, width, height);\n            }\n            ctx.fillStyle = fillStyle;\n            ctx.fillRect(x, y, width, height);\n        }\n    }]);\n\n    return Grid;\n}();\n\nexports.default = Grid;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle/stepper.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n/**\n * @since 20180123 13:13\n * @author vivaxy\n */\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Stepper = function () {\n    function Stepper(_ref) {\n        var ctx = _ref.ctx;\n\n        _classCallCheck(this, Stepper);\n\n        this.ctx = ctx;\n        this.steps = 0;\n    }\n\n    _createClass(Stepper, [{\n        key: 'render',\n        value: function render() {\n            var ctx = this.ctx;\n\n            ctx.font = _configs.stepperFontSize + 'px/' + _configs.stepperHeight + 'px serif';\n            ctx.textAlign = 'right';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = _configs.stepperFontColor;\n            ctx.fillText(String(this.steps), _configs.stepperLeft + _configs.stepperWidth, _configs.stepperTop + _configs.stepperHeight / 2);\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.steps = 0;\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            this.steps += 1;\n        }\n    }, {\n        key: 'getStepper',\n        value: function getStepper() {\n            return this.steps;\n        }\n    }]);\n\n    return Stepper;\n}();\n\nexports.default = Stepper;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle/tile.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _bezierEasing = __webpack_require__(\"./node_modules/bezier-easing/src/index.js\");\n\nvar _bezierEasing2 = _interopRequireDefault(_bezierEasing);\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Tile = function () {\n    function Tile(_ref) {\n        var ctx = _ref.ctx,\n            width = _ref.width,\n            height = _ref.height,\n            text = _ref.text,\n            type = _ref.type,\n            rowIndex = _ref.rowIndex,\n            colIndex = _ref.colIndex,\n            _ref$deltaX = _ref.deltaX,\n            deltaX = _ref$deltaX === undefined ? 0 : _ref$deltaX,\n            _ref$deltaY = _ref.deltaY,\n            deltaY = _ref$deltaY === undefined ? 0 : _ref$deltaY;\n\n        _classCallCheck(this, Tile);\n\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        this.borderWidth = _configs.tileBorderWidth;\n        this.strokeStyle = _configs.tileBorderColor;\n        this.text = text;\n        this.type = type;\n        this.rowIndex = rowIndex;\n        this.colIndex = colIndex;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.fillStyle = _configs.tileColors[Math.min(rowIndex, colIndex)];\n\n        // https://github.com/atlassian/react-beautiful-dnd/blob/master/src/view/animation.js#L26\n        this.easing = (0, _bezierEasing2.default)(0.2, 0, 0, 1);\n        this.animationDuration = 100;\n    }\n\n    _createClass(Tile, [{\n        key: 'renderSpaceTile',\n        value: function renderSpaceTile() {\n            var ctx = this.ctx,\n                fillStyle = this.fillStyle,\n                borderWidth = this.borderWidth,\n                width = this.width,\n                height = this.height,\n                rowIndex = this.rowIndex,\n                colIndex = this.colIndex,\n                deltaX = this.deltaX,\n                deltaY = this.deltaY;\n\n            var _getTilePosition = (0, _configs.getTilePosition)({ colIndex: colIndex, rowIndex: rowIndex }),\n                x = _getTilePosition.x,\n                y = _getTilePosition.y;\n\n            ctx.fillStyle = fillStyle;\n            ctx.fillRect(x + deltaX, y + deltaY, width, height);\n\n            if (borderWidth) {\n                ctx.lineWidth = borderWidth;\n                ctx.strokeStyle = strokeStyle;\n                ctx.strokeRect(x, y, width, height);\n            }\n        }\n    }, {\n        key: 'renderNormalTile',\n        value: function renderNormalTile() {\n            var ctx = this.ctx,\n                strokeStyle = this.strokeStyle,\n                fillStyle = this.fillStyle,\n                borderWidth = this.borderWidth,\n                width = this.width,\n                height = this.height,\n                text = this.text,\n                rowIndex = this.rowIndex,\n                colIndex = this.colIndex,\n                deltaX = this.deltaX,\n                deltaY = this.deltaY;\n\n            var _getTilePosition2 = (0, _configs.getTilePosition)({ colIndex: colIndex, rowIndex: rowIndex }),\n                x = _getTilePosition2.x,\n                y = _getTilePosition2.y;\n\n            ctx.fillStyle = fillStyle;\n            ctx.fillRect(x + deltaX, y + deltaY, width, height);\n\n            if (borderWidth) {\n                ctx.lineWidth = borderWidth;\n                ctx.strokeStyle = strokeStyle;\n                ctx.strokeRect(x, y, width, height);\n            }\n\n            ctx.font = '48px serif';\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = _configs.tileTextColor;\n            ctx.fillText(text, x + deltaX + width / 2, y + deltaY + height / 2);\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var type = this.type;\n\n            if (type === _configs.tileTypes.SPACE) {\n                return this.renderSpaceTile();\n            }\n            return this.renderNormalTile();\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            this.updateDeltaAnimation();\n        }\n    }, {\n        key: 'animateToResetPosition',\n        value: function animateToResetPosition() {\n            this.animationStartTime = (0, _configs.getNow)();\n            this.animationStartDeltaX = this.deltaX;\n            this.animationStartDeltaY = this.deltaY;\n            this.animationStartWidth = this.width;\n            this.animationStartHeight = this.height;\n        }\n    }, {\n        key: 'updateDeltaAnimation',\n        value: function updateDeltaAnimation() {\n            if (this.animationStartTime) {\n                var progress = ((0, _configs.getNow)() - this.animationStartTime) / this.animationDuration;\n                this.deltaX = this.animationStartDeltaX * (1 - this.easing(progress));\n                this.deltaY = this.animationStartDeltaY * (1 - this.easing(progress));\n                if (progress >= 1) {\n                    // 修复动画的最终位置\n                    this.deltaX = 0;\n                    this.deltaY = 0;\n                    this.animationStartTime = null;\n                    this.animationStartDeltaX = null;\n                    this.animationStartDeltaY = null;\n                    this.animationStartWidth = null;\n                    this.animationStartHeight = null;\n                }\n            }\n        }\n    }]);\n\n    return Tile;\n}();\n\nexports.default = Tile;\n\n/***/ }),\n\n/***/ \"./src/main/puzzle/timer.js\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.formatTime = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @since 20180123 13:13\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author vivaxy\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _configs = __webpack_require__(\"./src/main/configs.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar pad = function pad(string, length) {\n    while (length - string.length > 0) {\n        string = '0' + string;\n    }\n    return string;\n};\n\nvar formatTime = exports.formatTime = function formatTime(time) {\n    var milliseconds = time % 1000;\n    var seconds = (time - milliseconds) / 1000 % 60;\n    var minutes = ((time - milliseconds) / 1000 - seconds) / 60;\n    return minutes + ':' + pad(String(seconds), 2) + '.' + pad(String(milliseconds), 3);\n};\n\nvar Timer = function () {\n    function Timer(_ref) {\n        var ctx = _ref.ctx;\n\n        _classCallCheck(this, Timer);\n\n        this.ctx = ctx;\n        this.time = 0;\n        this.startingTime = null;\n    }\n\n    _createClass(Timer, [{\n        key: 'render',\n        value: function render() {\n            var ctx = this.ctx;\n\n            ctx.font = _configs.timerFontSize + 'px/' + _configs.timerHeight + 'px serif';\n            ctx.textAlign = 'left';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = _configs.timerFontColor;\n            ctx.fillText(formatTime(this.time), _configs.timerLeft, _configs.timerTop + _configs.timerHeight / 2);\n        }\n    }, {\n        key: 'start',\n        value: function start() {\n            if (!this.startingTime) {\n                this.time = 0;\n                this.startingTime = (0, _configs.getNow)();\n            }\n        }\n    }, {\n        key: 'stop',\n        value: function stop() {\n            this.startingTime = null;\n        }\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.time = 0;\n            this.startingTime = null;\n        }\n    }, {\n        key: 'update',\n        value: function update() {\n            if (this.startingTime) {\n                this.time = (0, _configs.getNow)() - this.startingTime;\n            }\n        }\n    }, {\n        key: 'getTime',\n        value: function getTime() {\n            return this.time;\n        }\n    }]);\n\n    return Timer;\n}();\n\nexports.default = Timer;\n\n/***/ }),\n\n/***/ \"./src/styles/index.pcss\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(\"./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss\");\nif(typeof content === 'string') content = [[module.i, content, '']];\n// add the styles to the DOM\nvar update = __webpack_require__(\"./node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js??ref--1-2!./index.pcss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js??ref--1-2!./index.pcss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(\"./src/entries/index.js\");\n\n\n/***/ })\n\n},[0]);\n\n\n// WEBPACK FOOTER //\n// js/index.js","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gaëtan Renaudeau 2014 - 2015 – MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  if (mX1 !== mY1 || mX2 !== mY2) {\n    for (var i = 0; i < kSplineTableSize; ++i) {\n      sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    if (mX1 === mY1 && mX2 === mY2) {\n      return x; // linear\n    }\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bezier-easing/src/index.js","exports = module.exports = require(\"./../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"/**\\n * @since 2017-02-20 10:27\\n * @author vivaxy\\n */\\n\\n:root {\\n}\\n\\n* {\\n    -webkit-tap-highlight-color: transparent;\\n}\\n\\nhtml {\\n    height: 100%;\\n    box-sizing: border-box;\\n}\\n\\nbody {\\n    margin: 0;\\n    height: 100%;\\n    position: relative;\\n}\\n\\ncanvas {\\n    display: block;\\n    background-color: #ffffff;\\n    position: absolute;\\n}\\n\\n.score-container {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    background-color: rgba(0, 0, 0, 0.9);\\n    color: #fff;\\n    font-size: 12px;\\n    display: none;\\n    -webkit-box-orient: vertical;\\n    -webkit-box-direction: normal;\\n        -ms-flex-direction: column;\\n            flex-direction: column;\\n    padding: 60px 20px;\\n}\\n\\n.score-container .score-tab {\\n    -webkit-box-flex: 0;\\n        -ms-flex: none;\\n            flex: none;\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    text-align: center;\\n    height: 30px;\\n    line-height: 30px;\\n    margin-bottom: 30px;\\n}\\n\\n.score-container .score-tab .score-tab-item {\\n    -webkit-box-flex: 1;\\n        -ms-flex: 1;\\n            flex: 1;\\n    border-bottom: 1px solid transparent;\\n}\\n\\n.score-container .score-tab .score-tab-item[data-active] {\\n    border-bottom-color: #fff;\\n}\\n\\n.score-container .score-list {\\n    -webkit-box-flex: 1;\\n        -ms-flex: 1;\\n            flex: 1;\\n    overflow-y: auto;\\n}\\n\\n.score-container .score-list ul {\\n    margin: 0;\\n    padding: 0;\\n}\\n\\n.score-container .score-list ul li {\\n    display: -webkit-box;\\n    display: -ms-flexbox;\\n    display: flex;\\n    margin-bottom: 10px;\\n}\\n\\n.score-container .score-list ul li div {\\n    display: inline-block;\\n    height: 20px;\\n    line-height: 20px;\\n}\\n\\n.score-container .score-list ul li .index {\\n    width: 5%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .username {\\n    width: 35%;\\n    text-indent: 10px;\\n}\\n\\n.score-container .score-list ul li .steps {\\n    width: 10%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .time {\\n    width: 15%;\\n    text-align: right;\\n}\\n\\n.score-container .score-list ul li .timestamp {\\n    width: 35%;\\n    text-align: right;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/postcss-loader?{}!./src/styles/index.pcss\n// module id = ./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss\n// module chunks = 0","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/eventemitter3/index.js","/**\n * @since 2017-02-20 10:25\n * @author vivaxy\n */\n\nimport '../main';\n\nif (module.hot) {\n    module.hot.accept('../main', () => {\n        location.reload();\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entries/index.js","import { canvasHeight, canvasWidth } from './configs';\n\nexport default class Canvas {\n    constructor() {\n        const canvas = document.querySelector('.js-canvas');\n        this.canvas = canvas;\n        this.ctx = canvas.getContext('2d');\n        this.width = canvasWidth;\n        this.height = canvasHeight;\n        canvas.width = canvasWidth;\n        canvas.height = canvasHeight;\n        this.styles = {\n            width: window.innerWidth,\n            height: window.innerHeight,\n            top: 0,\n            left: 0,\n        };\n        this.updatePosition();\n    }\n\n    updatePosition() {\n        const { canvas, width, height, styles } = this;\n        if (width / height > window.innerWidth / window.innerHeight) {\n            // canvas is much wider, fit canvas width to window width\n            styles.width = window.innerWidth;\n            styles.height = window.innerWidth * height / width;\n        } else {\n            styles.height = window.innerHeight;\n            styles.width = window.innerHeight * width / height;\n        }\n        styles.top = (window.innerHeight - styles.height) / 2;\n        styles.left = (window.innerWidth - styles.width) / 2;\n        Object.keys(styles).forEach((styleKey) => {\n            canvas.style[styleKey] = styles[styleKey] + 'px';\n        });\n    }\n\n    getCtx() {\n        return this.ctx;\n    }\n\n    getCanvas() {\n        return this.canvas;\n    }\n\n    clear() {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/canvas.js","/**\n * @since 2017-03-17 13:57:46\n * @author vivaxy\n */\n\nimport '../styles/index.pcss';\n\nimport { browserEvents, events, puzzleStatusCodes } from './configs';\nimport Canvas from './canvas';\nimport Puzzle from './puzzle';\nimport Input from './input';\n\nclass Game {\n    constructor({ row = 4, col = 4 } = {}) {\n        const canvas = new Canvas();\n        const input = new Input({ canvas: canvas.getCanvas() });\n        const puzzle = new Puzzle({ ctx: canvas.getCtx(), row, col, input });\n        this.canvas = canvas;\n        this.puzzle = puzzle;\n        // disable scroll. // weixin need this\n        document.body.addEventListener(browserEvents.TOUCH_MOVE, (e) => {\n            e.preventDefault();\n        }, { passive: false });\n        input.on(events.RESIZE_CANVAS, () => {\n            canvas.updatePosition();\n        });\n    }\n\n    render() {\n        const { puzzle, canvas } = this;\n        canvas.clear();\n        puzzle.render();\n    }\n\n    update() {\n        const { puzzle } = this;\n        puzzle.update();\n    }\n\n    loop() {\n        this.update();\n        this.render();\n        requestAnimationFrame(() => {\n            this.loop();\n        });\n    }\n\n    start() {\n        this.loop();\n        this.puzzle.scramble();\n        this.puzzle.puzzleStatus = puzzleStatusCodes.READY;\n    }\n}\n\nnew Game().start();\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/index.js","import { EventEmitter } from 'eventemitter3';\n\nimport { directions, events, browserEvents, mapPointToCanvas } from './configs';\n\nconst getCoords = (e) => {\n    if (e.changedTouches) {\n        return {\n            x: mapPointToCanvas(e.changedTouches[0].clientX - e.target.offsetLeft),\n            y: mapPointToCanvas(e.changedTouches[0].clientY - e.target.offsetTop)\n        };\n    }\n    return {\n        x: mapPointToCanvas(e.clientX - e.target.offsetLeft),\n        y: mapPointToCanvas(e.clientY - e.target.offsetTop)\n    };\n};\n\nexport default class Input extends EventEmitter {\n    constructor({ canvas }) {\n        super();\n        this.canvas = canvas;\n\n        this.invalidPoint = { x: null, y: null };\n        this.resetPoint(this.invalidPoint);\n\n        this.initialize();\n    }\n\n    initialize() {\n        const { canvas } = this;\n        const element = document.body;\n        element.addEventListener(browserEvents.TOUCH_START, this.start, { passive: true });\n        element.addEventListener(browserEvents.TOUCH_MOVE, this.move, { passive: true });\n        element.addEventListener(browserEvents.TOUCH_END, this.end, { passive: true });\n        element.addEventListener(browserEvents.TOUCH_CANCEL, this.end, { passive: true });\n        canvas.addEventListener(browserEvents.CLICK, this.click, { passive: true });\n        window.addEventListener(browserEvents.RESIZE, this.resize, { passive: true });\n        window.addEventListener(browserEvents.ORIENTATION_CHANGE, this.orientationChange, { passive: true });\n    }\n\n    getDirection() {\n        const xMovement = Math.abs(this.startPointX - this.pointX);\n        const yMovement = Math.abs(this.startPointY - this.pointY);\n        if (xMovement > yMovement) {\n            if (this.pointX - this.startPointX > 0) {\n                return directions.RIGHT;\n            } else {\n                return directions.LEFT;\n            }\n        } else {\n            if (this.pointY - this.startPointY > 0) {\n                return directions.DOWN;\n            } else {\n                return directions.UP;\n            }\n        }\n    }\n\n    tryMove() {\n        const xMovement = this.pointX - this.startPointX;\n        const yMovement = this.pointY - this.startPointY;\n        const point = { deltaX: xMovement, deltaY: yMovement, x: this.pointX, y: this.pointY };\n        const direction = this.getDirection();\n        this.emit(events.TRY_MOVE, direction, point);\n    }\n\n    setStartPoint({ x = this.startPointX, y = this.startPointY }) {\n        this.startPointX = x;\n        this.startPointY = y;\n    }\n\n    moveStartPoint({ x, y }) {\n        this.startPointX += x;\n        this.startPointY += y;\n    }\n\n    resetPoint({ x, y }) {\n        this.startPointX = x;\n        this.startPointY = y;\n        this.pointX = x;\n        this.pointY = y;\n    }\n\n    start = (e) => {\n        const point = getCoords(e);\n        this.resetPoint(point);\n    };\n\n    move = (e) => {\n        const point = getCoords(e);\n        this.pointX = point.x;\n        this.pointY = point.y;\n        this.tryMove();\n    };\n\n    end = () => {\n        this.resetPoint(this.invalidPoint);\n        this.emit(events.RESET_SPACE_TILE);\n    };\n\n    click = (e) => {\n        this.emit(events.CLICK, getCoords(e));\n    };\n\n    resize = () => {\n        this.emit(events.RESIZE_CANVAS);\n    };\n\n    orientationChange = () => {\n        this.emit(events.RESIZE_CANVAS);\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/input.js","import Fingerprint2 from 'fingerprintjs2';\n\nimport {\n    tileSize,\n    tileTypes,\n    events,\n    movementThreshold,\n    tileSpacing,\n    size,\n    buttonTypes,\n    directions,\n    puzzleStatusCodes,\n    getNow,\n    browserEvents,\n} from './configs';\n\nimport Grid from './puzzle/grid';\nimport Tile from './puzzle/tile';\nimport Buttons from './puzzle/buttons';\nimport Timer, { formatTime } from './puzzle/timer';\nimport Stepper from './puzzle/stepper';\nimport fetch from '../lib/fetch';\nimport getUsername from '../lib/getUsername';\n\nconst scoreNames = {\n    userTopStepsList: 'My Steps',\n    userTopTimeList: 'My Time',\n    globalTopStepsList: 'World Steps',\n    globalTopTimeList: 'World Time',\n};\nconst scoreKeys = ['username', 'steps', 'time', 'timestamp'];\n\nconst whenDirection = (direction) => {\n    return (options) => {\n        return Object.keys(options).map((directionKey) => {\n            if (directionKey.toUpperCase() === direction) {\n                return options[directionKey]();\n            }\n        });\n    }\n};\n\nexport default class Puzzle {\n    constructor({ ctx, row, col, input }) {\n        this.ctx = ctx;\n        this.row = row;\n        this.col = col;\n        this.input = input;\n\n        this.grid = new Grid({ ctx });\n        this.buttons = new Buttons({ ctx });\n        this.timer = new Timer({ ctx });\n        this.stepper = new Stepper({ ctx });\n\n        this.tileList = this.initializeTileList();\n        this.initializeInput();\n        this.buttons.enable([buttonTypes.SCRAMBLE]);\n        this.puzzleStatus = puzzleStatusCodes.SCRAMBLING;\n\n        this.scores = {};\n        this.getScores();\n    }\n\n    initializeInput() {\n        const scoreContainer = document.querySelector('.js-score-container');\n\n        this.input.on(events.TRY_MOVE, (direction, point) => {\n            if ([puzzleStatusCodes.SCRAMBLING, puzzleStatusCodes.WINNING].includes(this.puzzleStatus)) {\n                return;\n            }\n            this.tryMove(direction, point);\n            whenDirection(direction)({\n                left: () => {\n                    if (point.deltaX < -movementThreshold) {\n                        this.move(direction, point);\n                    }\n                },\n                up: () => {\n                    if (point.deltaY < -movementThreshold) {\n                        this.move(direction, point);\n                    }\n                },\n                right: () => {\n                    if (point.deltaX > movementThreshold) {\n                        this.move(direction, point);\n                    }\n                },\n                down: () => {\n                    if (point.deltaY > movementThreshold) {\n                        this.move(direction, point);\n                    }\n                },\n            });\n        });\n        this.input.on(events.RESET_SPACE_TILE, () => {\n            const tile = this.findSpaceTile();\n            tile.animateToResetPosition();\n        });\n        this.input.on(events.CLICK, (point) => {\n            const buttonAction = this.buttons.hitButton(point);\n            switch (buttonAction) {\n                case buttonTypes.SCRAMBLE:\n                    this.puzzleStatus = puzzleStatusCodes.SCRAMBLING;\n                    this.timer.reset();\n                    this.stepper.reset();\n                    this.scramble();\n                    this.puzzleStatus = puzzleStatusCodes.READY;\n                    this.buttons.enable([buttonTypes.SCRAMBLE]);\n                    break;\n                case buttonTypes.SHOW_SCORE:\n                    scoreContainer.style.display = 'flex';\n                    this.buttons.enable([buttonTypes.SHOW_SCORE]);\n                    break;\n            }\n        });\n\n        scoreContainer.addEventListener(browserEvents.TOUCH_START, (e) => {\n            e.stopPropagation();\n        });\n        scoreContainer.addEventListener(browserEvents.TOUCH_MOVE, (e) => {\n            e.stopPropagation();\n        });\n        scoreContainer.addEventListener(browserEvents.TOUCH_END, (e) => {\n            e.stopPropagation();\n        });\n        scoreContainer.addEventListener(browserEvents.TOUCH_CANCEL, (e) => {\n            e.stopPropagation();\n        });\n        scoreContainer.addEventListener(browserEvents.CLICK, () => {\n            scoreContainer.style.display = 'none';\n        });\n    }\n\n    initializeTileList() {\n        const { ctx, col, row } = this;\n        const width = tileSize;\n        const height = tileSize;\n        return Array.from({ length: row }, (rowItem, rowIndex) => {\n            return Array.from({ length: col }, (colItem, colIndex) => {\n                return new Tile({\n                    ctx: ctx,\n                    width,\n                    height,\n                    colIndex,\n                    rowIndex,\n                    text: String(rowIndex * row + colIndex + 1),\n                    type: colIndex === col - 1 && rowIndex === row - 1 ? tileTypes.SPACE : tileTypes.NORMAL,\n                });\n            });\n        });\n    }\n\n    tryMove(direction, point) {\n        const tile = this.findSpaceTile();\n        if (tile.colIndex >= size - 1 && point.deltaX > 0) {\n            this.input.setStartPoint({ x: tile.x });\n            point.deltaX = 0;\n        }\n        if (tile.colIndex <= 0 && point.deltaX < 0) {\n            this.input.setStartPoint({ x: tile.x });\n            point.deltaX = 0;\n        }\n        if (tile.rowIndex <= 0 && point.deltaY < 0) {\n            this.input.setStartPoint({ y: tile.y });\n            point.deltaY = 0;\n        }\n        if (tile.rowIndex >= size - 1 && point.deltaY > 0) {\n            this.input.setStartPoint({ y: tile.y });\n            point.deltaY = 0;\n        }\n        tile.deltaX = point.deltaX;\n        tile.deltaY = point.deltaY;\n    }\n\n    swapTiles({ rowIndex: fromRowIndex, colIndex: fromColIndex }, { rowIndex: toRowIndex, colIndex: toColIndex }) {\n        const fromTile = this.tileList[fromRowIndex][fromColIndex]; // space tile\n        const toTile = this.tileList[toRowIndex][toColIndex]; // the other tile\n\n        // swap\n        this.tileList[fromRowIndex][fromColIndex] = toTile;\n        this.tileList[toRowIndex][toColIndex] = fromTile;\n        fromTile.rowIndex = toRowIndex;\n        fromTile.colIndex = toColIndex;\n        toTile.rowIndex = fromRowIndex;\n        toTile.colIndex = fromColIndex;\n\n        const deltaX = fromTile.deltaX;\n        const deltaY = fromTile.deltaY;\n        fromTile.deltaX = (fromColIndex - toColIndex) * (tileSize + tileSpacing) + deltaX;\n        fromTile.deltaY = (fromRowIndex - toRowIndex) * (tileSize + tileSpacing) + deltaY;\n        toTile.deltaX = (toColIndex - fromColIndex) * (tileSize + tileSpacing);\n        toTile.deltaY = (toRowIndex - fromRowIndex) * (tileSize + tileSpacing);\n        toTile.animateToResetPosition();\n        this.input.moveStartPoint({\n            x: (toColIndex - fromColIndex) * (tileSize + tileSpacing),\n            y: (toRowIndex - fromRowIndex) * (tileSize + tileSpacing)\n        });\n        if (this.puzzleStatus === puzzleStatusCodes.READY) {\n            this.timer.start();\n            this.puzzleStatus = puzzleStatusCodes.STARTED;\n        }\n        if (this.puzzleStatus === puzzleStatusCodes.STARTED) {\n            this.checkWinning();\n            this.stepper.update();\n        }\n    }\n\n    move(direction, point) {\n        const { rowIndex, colIndex } = this.findSpaceTile();\n        whenDirection(direction)({\n            left: () => {\n                if (colIndex <= 0) {\n                    this.input.resetPoint(point);\n                    return;\n                }\n                // move left\n                this.swapTiles({ rowIndex, colIndex }, { rowIndex, colIndex: colIndex - 1 });\n            },\n            up: () => {\n                if (rowIndex <= 0) {\n                    this.input.resetPoint(point);\n                    return;\n                }\n                // move up\n                this.swapTiles({ rowIndex, colIndex }, { rowIndex: rowIndex - 1, colIndex });\n            },\n            right: () => {\n                if (colIndex >= this.col - 1) {\n                    this.input.resetPoint(point);\n                    return;\n                }\n                // move right\n                this.swapTiles({ rowIndex, colIndex }, { rowIndex, colIndex: colIndex + 1 });\n            },\n            down: () => {\n                if (rowIndex >= this.row - 1) {\n                    this.input.resetPoint(point);\n                    return;\n                }\n                // move down\n                this.swapTiles({ rowIndex, colIndex }, { rowIndex: rowIndex + 1, colIndex });\n            }\n        });\n    }\n\n    findSpaceTile() {\n        const { tileList } = this;\n        return tileList.reduce((result, tileRow) => {\n            return result || tileRow.reduce((tileResult, tile) => {\n                if (tile.type === tileTypes.SPACE) {\n                    return tile;\n                }\n                return tileResult;\n            }, null);\n        }, null);\n    }\n\n    render() {\n        const { grid, tileList, buttons, timer, stepper } = this;\n        const renders = tileList.reduce(({ list: accRowList, spaceTile: accRowSpaceTile }, tileRow) => {\n            const { list: rowList, spaceTile: rowSpaceTile } = tileRow.reduce(({ list, spaceTile }, tile) => {\n                if (tile.type !== tileTypes.SPACE) {\n                    return { list: [...list, tile], spaceTile };\n                } else {\n                    return { list, spaceTile: tile };\n                }\n            }, { list: [], spaceTile: null });\n            return { list: [...accRowList, ...rowList], spaceTile: accRowSpaceTile || rowSpaceTile };\n        }, { list: [], spaceTile: null });\n        grid.render();\n        renders.spaceTile.render();\n        renders.list.map((tile) => {\n            tile.render();\n        });\n        buttons.render();\n        timer.render();\n        stepper.render();\n    }\n\n    update() {\n        this.tileList.forEach((tileRow) => {\n            tileRow.forEach((tile) => {\n                tile.update();\n            });\n        });\n        this.timer.update();\n    }\n\n    scramble() {\n        const directionKeys = Object.keys(directions);\n        Array.from({ length: 1000 }, () => {\n            return directions[directionKeys[Math.floor(Math.random() * directionKeys.length)]];\n        }).map((direction) => {\n            return this.move(direction, { x: 0, y: 0 });\n        });\n        const tile = this.findSpaceTile();\n        tile.animateToResetPosition();\n    }\n\n    checkWinning() {\n        const { row } = this;\n        const winning = this.tileList.every((tileRow, rowIndex) => {\n            return tileRow.every((tile, colIndex) => {\n                return Number(tile.text) === rowIndex * row + colIndex + 1;\n            });\n        });\n        if (winning) {\n            this.puzzleStatus = puzzleStatusCodes.WINNING;\n            this.timer.stop();\n            this.saveScore();\n        }\n    }\n\n    getScores() {\n        new Fingerprint2().get(async(fingerprint) => {\n            this.scores = await fetch({\n                path: '/api/15-puzzle/get-scores',\n                data: { fingerprint },\n            });\n            this.updateScoreBoard();\n        });\n    }\n\n    saveScore() {\n        const time = this.timer.getTime();\n        const steps = this.stepper.getStepper();\n        new Fingerprint2().get(async(fingerprint) => {\n            const username = getUsername({ fingerprint });\n            const timestamp = getNow();\n            this.scores = await fetch({\n                path: '/api/15-puzzle/add-score',\n                data: { username, time, steps, fingerprint, timestamp },\n            });\n            this.updateScoreBoard();\n        });\n    }\n\n    updateScoreBoard() {\n        const scoreContainer = document.querySelector('.js-score-container');\n        scoreContainer.innerHTML = '';\n        const scoreTab = document.createElement('div');\n        scoreTab.setAttribute('class', 'score-tab');\n        const scoreList = document.createElement('div');\n        scoreList.setAttribute('class', 'score-list');\n        Object.keys(scoreNames).forEach((scoreKey) => {\n            const tab = document.createElement('div');\n            tab.innerHTML = scoreNames[scoreKey];\n            tab.setAttribute('class', 'score-tab-item');\n            scoreTab.appendChild(tab);\n\n            const ul = document.createElement('ul');\n            const scores = this.scores[scoreKey];\n\n            const titleLi = document.createElement('li');\n\n            const index = document.createElement('div');\n            index.setAttribute('class', 'index');\n            index.innerHTML = '';\n            titleLi.appendChild(index);\n\n            scoreKeys.forEach((key) => {\n                const element = document.createElement('div');\n                element.setAttribute('class', key);\n                element.innerHTML = key;\n                titleLi.appendChild(element);\n            });\n            ul.appendChild(titleLi);\n\n            scores.forEach((scoreItem, scoreIndex) => {\n                const li = document.createElement('li');\n\n                const index = document.createElement('div');\n                index.setAttribute('class', 'index');\n                index.innerHTML = scoreIndex + 1;\n                li.appendChild(index);\n\n                scoreKeys.forEach((key) => {\n                    const element = document.createElement('div');\n                    element.setAttribute('class', key);\n                    if (key === 'time') {\n                        element.innerHTML = formatTime(scoreItem[key]);\n                    } else if (key === 'timestamp') {\n                        // todo format timestamp\n                        element.innerHTML = scoreItem[key];\n                    } else {\n                        element.innerHTML = scoreItem[key];\n                    }\n                    li.appendChild(element);\n                });\n                ul.appendChild(li);\n            });\n            scoreList.appendChild(ul);\n        });\n        scoreContainer.appendChild(scoreTab);\n        scoreContainer.appendChild(scoreList);\n\n        const scoreTabs = Array.from(scoreTab.children);\n        const scoreLists = Array.from(scoreList.children);\n        scoreTabs.forEach((tab, index) => {\n            if (index === 0) {\n                tab.setAttribute('data-active', '');\n                scoreLists.forEach((listItem) => {\n                    listItem.style.display = 'none';\n                });\n                scoreLists[index].style.display = 'block';\n            }\n            tab.addEventListener(browserEvents.CLICK, (e) => {\n                e.stopPropagation();\n                if (!tab.hasAttribute('data-active')) {\n                    scoreTabs.forEach((tabItem) => {\n                        tabItem.removeAttribute('data-active');\n                    });\n                    tab.setAttribute('data-active', '');\n                    scoreLists.forEach((listItem) => {\n                        listItem.style.display = 'none';\n                    });\n                    scoreLists[index].style.display = 'block';\n                }\n            });\n        });\n\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle.js","/**\n * @since 20180123 13:24\n * @author vivaxy\n */\n\nimport {\n    buttonAreaTop,\n    buttonAreaLeft,\n    buttonAreaWidth,\n    buttonAreaHeight,\n    buttonBackgroundColor,\n    buttonTextColor,\n    buttonSpacing,\n    buttonTypes,\n    buttonDisabledBackgroundColor,\n} from '../configs';\n\nexport default class Buttons {\n    constructor({ ctx }) {\n        this.ctx = ctx;\n        this.buttons = [\n            { text: 'Scramble', disabled: true, type: buttonTypes.SCRAMBLE },\n            { text: 'Scores', disabled: false, type: buttonTypes.SHOW_SCORE },\n        ];\n    }\n\n    enable(types) {\n        return this.buttons.map((button) => {\n            if (types.includes(button.type)) {\n                button.disabled = false;\n                return true;\n            }\n            return false;\n        });\n    }\n\n    hitButton({ x, y }) {\n        const buttonWidth = (buttonAreaWidth + buttonSpacing) / this.buttons.length - buttonSpacing;\n        const foundButton = this.buttons.find((button, index) => {\n            const buttonLeft = buttonAreaLeft + index * (buttonWidth + buttonSpacing);\n            if (x > buttonLeft && x < buttonLeft + buttonWidth && y > buttonAreaTop && y < buttonAreaTop + buttonAreaHeight) {\n                if (!button.disabled) {\n                    button.disabled = true;\n                    return true;\n                }\n            }\n            return false;\n        });\n        if (foundButton) {\n            return foundButton.type;\n        }\n        return null;\n    }\n\n    render() {\n        const { ctx } = this;\n        const buttonWidth = (buttonAreaWidth + buttonSpacing) / this.buttons.length - buttonSpacing;\n        this.buttons.forEach((button, index) => {\n            const x = buttonAreaLeft + index * (buttonWidth + buttonSpacing);\n            ctx.fillStyle = button.disabled ? buttonDisabledBackgroundColor : buttonBackgroundColor;\n            ctx.fillRect(x, buttonAreaTop, buttonWidth, buttonAreaHeight);\n\n            ctx.font = '48px serif';\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillStyle = buttonTextColor;\n            ctx.fillText(button.text, x + buttonWidth / 2, buttonAreaTop + buttonAreaHeight / 2);\n        });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle/buttons.js","import { gridBorderColor, gridBackgroundColor, gridBorderWidth, gridSize, gridX, gridY } from '../configs';\n\nexport default class Grid {\n    constructor({ ctx }) {\n        this.ctx = ctx;\n        this.x = gridX;\n        this.y = gridY;\n        this.width = this.height = gridSize;\n        this.borderWidth = gridBorderWidth;\n        this.strokeStyle = gridBorderColor;\n        this.fillStyle = gridBackgroundColor;\n    }\n\n    render() {\n        const { ctx, strokeStyle, fillStyle, borderWidth, x, y, width, height } = this;\n        if (borderWidth) {\n            ctx.strokeStyle = strokeStyle;\n            ctx.lineWidth = borderWidth;\n            ctx.strokeRect(x, y, width, height);\n        }\n        ctx.fillStyle = fillStyle;\n        ctx.fillRect(x, y, width, height);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle/grid.js","import { timerFontColor, timerFontSize, timerHeight, timerLeft, timerTop } from '../configs';\n\n/**\n * @since 20180123 13:13\n * @author vivaxy\n */\n\nimport { stepperFontColor, stepperFontSize, stepperHeight, stepperLeft, stepperTop, stepperWidth } from '../configs';\n\nexport default class Stepper {\n    constructor({ ctx }) {\n        this.ctx = ctx;\n        this.steps = 0;\n    }\n\n    render() {\n        const { ctx } = this;\n        ctx.font = `${stepperFontSize}px/${stepperHeight}px serif`;\n        ctx.textAlign = 'right';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = stepperFontColor;\n        ctx.fillText(String(this.steps), stepperLeft + stepperWidth, stepperTop + stepperHeight / 2);\n    }\n\n    reset() {\n        this.steps = 0\n    }\n\n    update() {\n        this.steps += 1;\n    }\n\n    getStepper() {\n        return this.steps;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle/stepper.js","import createBezierEasing from 'bezier-easing';\n\nimport {\n    tileBorderWidth,\n    tileBorderColor,\n    getTilePosition,\n    tileTypes,\n    tileTextColor,\n    tileColors,\n    getNow,\n} from '../configs';\n\nexport default class Tile {\n    constructor({ ctx, width, height, text, type, rowIndex, colIndex, deltaX = 0, deltaY = 0 }) {\n        this.ctx = ctx;\n        this.width = width;\n        this.height = height;\n        this.borderWidth = tileBorderWidth;\n        this.strokeStyle = tileBorderColor;\n        this.text = text;\n        this.type = type;\n        this.rowIndex = rowIndex;\n        this.colIndex = colIndex;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.fillStyle = tileColors[Math.min(rowIndex, colIndex)];\n\n        // https://github.com/atlassian/react-beautiful-dnd/blob/master/src/view/animation.js#L26\n        this.easing = createBezierEasing(0.2, 0, 0, 1);\n        this.animationDuration = 100;\n    }\n\n    renderSpaceTile() {\n        const { ctx, fillStyle, borderWidth, width, height, rowIndex, colIndex, deltaX, deltaY } = this;\n        const { x, y } = getTilePosition({ colIndex, rowIndex });\n        ctx.fillStyle = fillStyle;\n        ctx.fillRect(x + deltaX, y + deltaY, width, height);\n\n        if (borderWidth) {\n            ctx.lineWidth = borderWidth;\n            ctx.strokeStyle = strokeStyle;\n            ctx.strokeRect(x, y, width, height);\n        }\n    }\n\n    renderNormalTile() {\n        const { ctx, strokeStyle, fillStyle, borderWidth, width, height, text, rowIndex, colIndex, deltaX, deltaY } = this;\n        const { x, y } = getTilePosition({ colIndex, rowIndex });\n        ctx.fillStyle = fillStyle;\n        ctx.fillRect(x + deltaX, y + deltaY, width, height);\n\n        if (borderWidth) {\n            ctx.lineWidth = borderWidth;\n            ctx.strokeStyle = strokeStyle;\n            ctx.strokeRect(x, y, width, height);\n        }\n\n        ctx.font = '48px serif';\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = tileTextColor;\n        ctx.fillText(text, x + deltaX + width / 2, y + deltaY + height / 2);\n    }\n\n    render() {\n        const { type } = this;\n        if (type === tileTypes.SPACE) {\n            return this.renderSpaceTile();\n        }\n        return this.renderNormalTile();\n    }\n\n    update() {\n        this.updateDeltaAnimation();\n    }\n\n    animateToResetPosition() {\n        this.animationStartTime = getNow();\n        this.animationStartDeltaX = this.deltaX;\n        this.animationStartDeltaY = this.deltaY;\n        this.animationStartWidth = this.width;\n        this.animationStartHeight = this.height;\n    }\n\n    updateDeltaAnimation() {\n        if (this.animationStartTime) {\n            const progress = (getNow() - this.animationStartTime) / this.animationDuration;\n            this.deltaX = this.animationStartDeltaX * (1 - this.easing(progress));\n            this.deltaY = this.animationStartDeltaY * (1 - this.easing(progress));\n            if (progress >= 1) {\n                // 修复动画的最终位置\n                this.deltaX = 0;\n                this.deltaY = 0;\n                this.animationStartTime = null;\n                this.animationStartDeltaX = null;\n                this.animationStartDeltaY = null;\n                this.animationStartWidth = null;\n                this.animationStartHeight = null;\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle/tile.js","/**\n * @since 20180123 13:13\n * @author vivaxy\n */\n\nimport { getNow, timerFontColor, timerFontSize, timerHeight, timerLeft, timerTop } from '../configs';\n\nconst pad = (string, length) => {\n    while (length - string.length > 0) {\n        string = '0' + string;\n    }\n    return string;\n};\n\nexport const formatTime = (time) => {\n    const milliseconds = time % 1000;\n    const seconds = (time - milliseconds) / 1000 % 60;\n    const minutes = ((time - milliseconds) / 1000 - seconds) / 60;\n    return `${minutes}:${pad(String(seconds), 2)}.${pad(String(milliseconds), 3)}`;\n};\n\nexport default class Timer {\n\n    constructor({ ctx }) {\n        this.ctx = ctx;\n        this.time = 0;\n        this.startingTime = null;\n    }\n\n    render() {\n        const { ctx } = this;\n        ctx.font = `${timerFontSize}px/${timerHeight}px serif`;\n        ctx.textAlign = 'left';\n        ctx.textBaseline = 'middle';\n        ctx.fillStyle = timerFontColor;\n        ctx.fillText(formatTime(this.time), timerLeft, timerTop + timerHeight / 2);\n    }\n\n    start() {\n        if (!this.startingTime) {\n            this.time = 0;\n            this.startingTime = getNow();\n        }\n    }\n\n    stop() {\n        this.startingTime = null;\n    }\n\n    reset() {\n        this.time = 0;\n        this.startingTime = null;\n    }\n\n    update() {\n        if (this.startingTime) {\n            this.time = getNow() - this.startingTime;\n        }\n    }\n\n    getTime() {\n        return this.time;\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/main/puzzle/timer.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js??ref--1-2!./index.pcss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js??ref--1-2!./index.pcss\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/css-loader/index.js!./../../node_modules/postcss-loader/index.js??ref--1-2!./index.pcss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/index.pcss\n// module id = ./src/styles/index.pcss\n// module chunks = 0"],"sourceRoot":""}