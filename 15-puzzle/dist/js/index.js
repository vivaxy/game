/*! @2017 vivaxy */
webpackJsonp([0],{"./node_modules/bezier-easing/src/index.js":function(t,e,n){"use strict";function i(t,e){return 1-3*e+3*t}function r(t,e){return 3*e-6*t}function o(t){return 3*t}function s(t,e,n){return((i(e,n)*t+r(e,n))*t+o(e))*t}function a(t,e,n){return 3*i(e,n)*t*t+2*r(e,n)*t+o(e)}function l(t,e,n,i,r){var o,a,l=0;do a=e+(n-e)/2,o=s(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>f&&++l<h);return a}function u(t,e,n,i){for(var r=0;r<c;++r){var o=a(e,n,i);if(0===o)return e;var l=s(e,n,i)-t;e-=l/o}return e}var c=4,d=.001,f=1e-7,h=10,p=11,v=1/(p-1),m="function"==typeof Float32Array;t.exports=function(t,e,n,i){function r(e){for(var i=0,r=1,s=p-1;r!==s&&o[r]<=e;++r)i+=v;--r;var c=(e-o[r])/(o[r+1]-o[r]),f=i+c*v,h=a(f,t,n);return h>=d?u(e,f,t,n):0===h?f:l(e,i,i+v,t,n)}if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");var o=m?new Float32Array(p):new Array(p);if(t!==e||n!==i)for(var c=0;c<p;++c)o[c]=s(c*v,t,n);return function(o){return t===e&&n===i?o:0===o?0:1===o?1:s(r(o),e,i)}}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss":function(t,e,n){e=t.exports=n("./node_modules/css-loader/lib/css-base.js")(),e.push([t.i,"/**\n * @since 2017-02-20 10:27\n * @author vivaxy\n */\n\n:root {\n}\n\n* {\n    -webkit-tap-highlight-color: transparent;\n}\n\nhtml {\n    height: 100%;\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0;\n    height: 100%;\n    position: relative;\n}\n\ncanvas {\n    display: block;\n    background-color: #ffffff;\n    position: absolute;\n}\n\n.score-container {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.9);\n    color: #fff;\n    font-size: 12px;\n    display: none;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    padding: 60px 20px;\n}\n\n.score-container .score-tab {\n    -webkit-box-flex: 0;\n        -ms-flex: none;\n            flex: none;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    text-align: center;\n    height: 30px;\n    line-height: 30px;\n    margin-bottom: 30px;\n}\n\n.score-container .score-tab .score-tab-item {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    border-bottom: 1px solid transparent;\n}\n\n.score-container .score-tab .score-tab-item[data-active] {\n    border-bottom-color: #fff;\n}\n\n.score-container .score-list {\n    -webkit-box-flex: 1;\n        -ms-flex: 1;\n            flex: 1;\n    overflow-y: auto;\n}\n\n.score-container .score-list ul {\n    margin: 0;\n    padding: 0;\n}\n\n.score-container .score-list ul li {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    margin-bottom: 10px;\n}\n\n.score-container .score-list ul li div {\n    display: inline-block;\n    height: 20px;\n    line-height: 20px;\n}\n\n.score-container .score-list ul li .index {\n    width: 5%;\n    text-align: right;\n}\n\n.score-container .score-list ul li .username {\n    width: 35%;\n    text-indent: 10px;\n}\n\n.score-container .score-list ul li .steps {\n    width: 10%;\n    text-align: right;\n}\n\n.score-container .score-list ul li .time {\n    width: 15%;\n    text-align: right;\n}\n\n.score-container .score-list ul li .timestamp {\n    width: 35%;\n    text-align: right;\n}\n",""])},"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new r(n,i||t,o),a=u?u+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,u="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(u=!1)),a.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)l.call(t,e)&&n.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=u?u+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(t){var e=u?u+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,r,o){var s=u?u+t:t;if(!this._events[s])return!1;var a,l,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,i),!0;case 5:return c.fn.call(c.context,e,n,i,r),!0;case 6:return c.fn.call(c.context,e,n,i,r,o),!0}for(l=1,a=new Array(d-1);l<d;l++)a[l-1]=arguments[l];c.fn.apply(c.context,a)}else{var f,h=c.length;for(l=0;l<h;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),d){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,i);break;default:if(!a)for(f=1,a=new Array(d-1);f<d;f++)a[f-1]=arguments[f];c[l].fn.apply(c[l].context,a)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,n,i){var r=u?u+t:t;if(!this._events[r])return this;if(!e)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||i&&!o.once||n&&o.context!==n||s(this,r);else{for(var a=0,l=[],c=o.length;a<c;a++)(o[a].fn!==e||i&&!o[a].once||n&&o[a].context!==n)&&l.push(o[a]);l.length?this._events[r]=1===l.length?l[0]:l:s(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=u?u+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=u,a.EventEmitter=a,t.exports=a},"./src/entries/index.js":function(t,e,n){"use strict";n("./src/main/index.js")},"./src/main/canvas.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("./src/main/configs.js"),s=function(){function t(){i(this,t);var e=document.querySelector(".js-canvas");this.canvas=e,this.ctx=e.getContext("2d"),this.width=o.canvasWidth,this.height=o.canvasHeight,e.width=o.canvasWidth,e.height=o.canvasHeight,this.styles={width:window.innerWidth,height:window.innerHeight,top:0,left:0},this.updatePosition()}return r(t,[{key:"updatePosition",value:function(){var t=this.canvas,e=this.width,n=this.height,i=this.styles;e/n>window.innerWidth/window.innerHeight?(i.width=window.innerWidth,i.height=window.innerWidth*n/e):(i.height=window.innerHeight,i.width=window.innerHeight*e/n),i.top=(window.innerHeight-i.height)/2,i.left=(window.innerWidth-i.width)/2,Object.keys(i).forEach(function(e){t.style[e]=i[e]+"px"})}},{key:"getCtx",value:function(){return this.ctx}},{key:"getCanvas",value:function(){return this.canvas}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}}]),t}();e.default=s},"./src/main/index.js":function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n("./src/styles/index.pcss");var s=n("./src/main/configs.js"),a=n("./src/main/canvas.js"),l=i(a),u=n("./src/main/puzzle.js"),c=i(u),d=n("./src/main/input.js"),f=i(d),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.row,i=void 0===n?4:n,o=e.col,a=void 0===o?4:o;r(this,t);var u=new l.default,d=new f.default({canvas:u.getCanvas()}),h=new c.default({ctx:u.getCtx(),row:i,col:a,input:d});this.canvas=u,this.puzzle=h,document.body.addEventListener(s.browserEvents.TOUCH_MOVE,function(t){t.preventDefault()},{passive:!1}),d.on(s.events.RESIZE_CANVAS,function(){u.updatePosition()})}return o(t,[{key:"render",value:function(){var t=this.puzzle,e=this.canvas;e.clear(),t.render()}},{key:"update",value:function(){var t=this.puzzle;t.update()}},{key:"loop",value:function(){var t=this;this.update(),this.render(),requestAnimationFrame(function(){t.loop()})}},{key:"start",value:function(){this.loop(),this.puzzle.scramble(),this.puzzle.puzzleStatus=s.puzzleStatusCodes.READY}}]),t}();(new h).start()},"./src/main/input.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n("./node_modules/eventemitter3/index.js"),l=n("./src/main/configs.js"),u=function(t){return t.changedTouches?{x:(0,l.mapPointToCanvas)(t.changedTouches[0].clientX-t.target.offsetLeft),y:(0,l.mapPointToCanvas)(t.changedTouches[0].clientY-t.target.offsetTop)}:{x:(0,l.mapPointToCanvas)(t.clientX-t.target.offsetLeft),y:(0,l.mapPointToCanvas)(t.clientY-t.target.offsetTop)}},c=function(t){function e(t){var n=t.canvas;i(this,e);var o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.start=function(t){var e=u(t);o.resetPoint(e)},o.move=function(t){var e=u(t);o.pointX=e.x,o.pointY=e.y,o.tryMove()},o.end=function(){o.resetPoint(o.invalidPoint),o.emit(l.events.RESET_SPACE_TILE)},o.click=function(t){o.emit(l.events.CLICK,u(t))},o.resize=function(){o.emit(l.events.RESIZE_CANVAS)},o.orientationChange=function(){o.emit(l.events.RESIZE_CANVAS)},o.canvas=n,o.invalidPoint={x:null,y:null},o.resetPoint(o.invalidPoint),o.initialize(),o}return o(e,t),s(e,[{key:"initialize",value:function(){var t=this.canvas,e=document.body;e.addEventListener(l.browserEvents.TOUCH_START,this.start,{passive:!0}),e.addEventListener(l.browserEvents.TOUCH_MOVE,this.move,{passive:!0}),e.addEventListener(l.browserEvents.TOUCH_END,this.end,{passive:!0}),e.addEventListener(l.browserEvents.TOUCH_CANCEL,this.end,{passive:!0}),t.addEventListener(l.browserEvents.CLICK,this.click,{passive:!0}),window.addEventListener(l.browserEvents.RESIZE,this.resize,{passive:!0}),window.addEventListener(l.browserEvents.ORIENTATION_CHANGE,this.orientationChange,{passive:!0})}},{key:"getDirection",value:function(){var t=Math.abs(this.startPointX-this.pointX),e=Math.abs(this.startPointY-this.pointY);return t>e?this.pointX-this.startPointX>0?l.directions.RIGHT:l.directions.LEFT:this.pointY-this.startPointY>0?l.directions.DOWN:l.directions.UP}},{key:"tryMove",value:function(){var t=this.pointX-this.startPointX,e=this.pointY-this.startPointY,n={deltaX:t,deltaY:e,x:this.pointX,y:this.pointY},i=this.getDirection();this.emit(l.events.TRY_MOVE,i,n)}},{key:"setStartPoint",value:function(t){var e=t.x,n=void 0===e?this.startPointX:e,i=t.y,r=void 0===i?this.startPointY:i;this.startPointX=n,this.startPointY=r}},{key:"moveStartPoint",value:function(t){var e=t.x,n=t.y;this.startPointX+=e,this.startPointY+=n}},{key:"resetPoint",value:function(t){var e=t.x,n=t.y;this.startPointX=e,this.startPointY=n,this.pointX=e,this.pointY=n}}]),e}(a.EventEmitter);e.default=c},"./src/main/puzzle.js":function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function i(r,o){try{var s=e[r](o),a=s.value}catch(t){return void n(t)}return s.done?void t(a):Promise.resolve(a).then(function(t){i("next",t)},function(t){i("throw",t)})}return i("next")})}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n("./node_modules/fingerprintjs2/dist/fingerprint2.min.js"),u=i(l),c=n("./src/main/configs.js"),d=n("./src/main/puzzle/grid.js"),f=i(d),h=n("./src/main/puzzle/tile.js"),p=i(h),v=n("./src/main/puzzle/buttons.js"),m=i(v),y=n("./src/main/puzzle/timer.js"),b=i(y),x=n("./src/main/puzzle/stepper.js"),g=i(x),w=n("./src/lib/fetch.js"),S=i(w),T=n("./src/lib/getUsername.js"),E=i(T),z={userTopStepsList:"My Steps",userTopTimeList:"My Time",globalTopStepsList:"World Steps",globalTopTimeList:"World Time"},k=["username","steps","time","timestamp"],C=function(t){return function(e){return Object.keys(e).map(function(n){if(n.toUpperCase()===t)return e[n]()})}},_=function(){function t(e){var n=e.ctx,i=e.row,r=e.col,o=e.input;s(this,t),this.ctx=n,this.row=i,this.col=r,this.input=o,this.grid=new f.default({ctx:n}),this.buttons=new m.default({ctx:n}),this.timer=new b.default({ctx:n}),this.stepper=new g.default({ctx:n}),this.tileList=this.initializeTileList(),this.initializeInput(),this.buttons.enable([c.buttonTypes.SCRAMBLE]),this.puzzleStatus=c.puzzleStatusCodes.SCRAMBLING,this.scores={},this.getScores()}return a(t,[{key:"initializeInput",value:function(){var t=this,e=document.querySelector(".js-score-container");this.input.on(c.events.TRY_MOVE,function(e,n){[c.puzzleStatusCodes.SCRAMBLING,c.puzzleStatusCodes.WINNING].includes(t.puzzleStatus)||(t.tryMove(e,n),C(e)({left:function(){n.deltaX<-c.movementThreshold&&t.move(e,n)},up:function(){n.deltaY<-c.movementThreshold&&t.move(e,n)},right:function(){n.deltaX>c.movementThreshold&&t.move(e,n)},down:function(){n.deltaY>c.movementThreshold&&t.move(e,n)}}))}),this.input.on(c.events.RESET_SPACE_TILE,function(){var e=t.findSpaceTile();e.animateToResetPosition()}),this.input.on(c.events.CLICK,function(n){var i=t.buttons.hitButton(n);switch(i){case c.buttonTypes.SCRAMBLE:t.puzzleStatus=c.puzzleStatusCodes.SCRAMBLING,t.timer.reset(),t.stepper.reset(),t.scramble(),t.puzzleStatus=c.puzzleStatusCodes.READY,t.buttons.enable([c.buttonTypes.SCRAMBLE]);break;case c.buttonTypes.SHOW_SCORE:e.style.display="flex",t.buttons.enable([c.buttonTypes.SHOW_SCORE])}}),e.addEventListener(c.browserEvents.TOUCH_START,function(t){t.stopPropagation()}),e.addEventListener(c.browserEvents.TOUCH_MOVE,function(t){t.stopPropagation()}),e.addEventListener(c.browserEvents.TOUCH_END,function(t){t.stopPropagation()}),e.addEventListener(c.browserEvents.TOUCH_CANCEL,function(t){t.stopPropagation()}),e.addEventListener(c.browserEvents.CLICK,function(){e.style.display="none"})}},{key:"initializeTileList",value:function(){var t=this.ctx,e=this.col,n=this.row,i=c.tileSize,r=c.tileSize;return Array.from({length:n},function(o,s){return Array.from({length:e},function(o,a){return new p.default({ctx:t,width:i,height:r,colIndex:a,rowIndex:s,text:String(s*n+a+1),type:a===e-1&&s===n-1?c.tileTypes.SPACE:c.tileTypes.NORMAL})})})}},{key:"tryMove",value:function(t,e){var n=this.findSpaceTile();n.colIndex>=c.size-1&&e.deltaX>0&&(this.input.setStartPoint({x:n.x}),e.deltaX=0),n.colIndex<=0&&e.deltaX<0&&(this.input.setStartPoint({x:n.x}),e.deltaX=0),n.rowIndex<=0&&e.deltaY<0&&(this.input.setStartPoint({y:n.y}),e.deltaY=0),n.rowIndex>=c.size-1&&e.deltaY>0&&(this.input.setStartPoint({y:n.y}),e.deltaY=0),n.deltaX=e.deltaX,n.deltaY=e.deltaY}},{key:"swapTiles",value:function(t,e){var n=t.rowIndex,i=t.colIndex,r=e.rowIndex,o=e.colIndex,s=this.tileList[n][i],a=this.tileList[r][o];this.tileList[n][i]=a,this.tileList[r][o]=s,s.rowIndex=r,s.colIndex=o,a.rowIndex=n,a.colIndex=i;var l=s.deltaX,u=s.deltaY;s.deltaX=(i-o)*(c.tileSize+c.tileSpacing)+l,s.deltaY=(n-r)*(c.tileSize+c.tileSpacing)+u,a.deltaX=(o-i)*(c.tileSize+c.tileSpacing),a.deltaY=(r-n)*(c.tileSize+c.tileSpacing),a.animateToResetPosition(),this.input.moveStartPoint({x:(o-i)*(c.tileSize+c.tileSpacing),y:(r-n)*(c.tileSize+c.tileSpacing)}),this.puzzleStatus===c.puzzleStatusCodes.READY&&(this.timer.start(),this.puzzleStatus=c.puzzleStatusCodes.STARTED),this.puzzleStatus===c.puzzleStatusCodes.STARTED&&(this.stepper.update(),this.checkWinning())}},{key:"move",value:function(t,e){var n=this,i=this.findSpaceTile(),r=i.rowIndex,o=i.colIndex;C(t)({left:function(){return o<=0?void n.input.resetPoint(e):void n.swapTiles({rowIndex:r,colIndex:o},{rowIndex:r,colIndex:o-1})},up:function(){return r<=0?void n.input.resetPoint(e):void n.swapTiles({rowIndex:r,colIndex:o},{rowIndex:r-1,colIndex:o})},right:function(){return o>=n.col-1?void n.input.resetPoint(e):void n.swapTiles({rowIndex:r,colIndex:o},{rowIndex:r,colIndex:o+1})},down:function(){return r>=n.row-1?void n.input.resetPoint(e):void n.swapTiles({rowIndex:r,colIndex:o},{rowIndex:r+1,colIndex:o})}})}},{key:"findSpaceTile",value:function(){var t=this.tileList;return t.reduce(function(t,e){return t||e.reduce(function(t,e){return e.type===c.tileTypes.SPACE?e:t},null)},null)}},{key:"render",value:function(){var t=this.grid,e=this.tileList,n=this.buttons,i=this.timer,r=this.stepper,s=e.reduce(function(t,e){var n=t.list,i=t.spaceTile,r=e.reduce(function(t,e){var n=t.list,i=t.spaceTile;return e.type!==c.tileTypes.SPACE?{list:[].concat(o(n),[e]),spaceTile:i}:{list:n,spaceTile:e}},{list:[],spaceTile:null}),s=r.list,a=r.spaceTile;return{list:[].concat(o(n),o(s)),spaceTile:i||a}},{list:[],spaceTile:null});t.render(),s.spaceTile.render(),s.list.map(function(t){t.render()}),n.render(),i.render(),r.render()}},{key:"update",value:function(){this.tileList.forEach(function(t){t.forEach(function(t){t.update()})}),this.timer.update()}},{key:"scramble",value:function(){var t=this,e=Object.keys(c.directions);Array.from({length:1},function(){return c.directions[e[Math.floor(Math.random()*e.length)]]}).map(function(e){return t.move(e,{x:0,y:0})});var n=this.findSpaceTile();n.animateToResetPosition()}},{key:"checkWinning",value:function(){var t=this.row,e=this.tileList.every(function(e,n){return e.every(function(e,i){return Number(e.text)===n*t+i+1})});e&&(this.puzzleStatus=c.puzzleStatusCodes.WINNING,this.timer.stop(),this.saveScore())}},{key:"getScores",value:function(){var t=this;(new u.default).get(function(){var e=r(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,S.default)({path:"/api/15-puzzle/get-scores",data:{fingerprint:n}});case 2:t.scores=e.sent,t.updateScoreBoard();case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())}},{key:"saveScore",value:function(){var t=this,e=this.timer.getTime(),n=this.stepper.getSteps();(new u.default).get(function(){var i=r(regeneratorRuntime.mark(function i(r){var o,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return o=(0,E.default)({fingerprint:r}),s=(0,c.getNow)(),i.next=4,(0,S.default)({path:"/api/15-puzzle/add-score",data:{username:o,time:e,steps:n,fingerprint:r,timestamp:s}});case 4:t.scores=i.sent,t.updateScoreBoard();case 6:case"end":return i.stop()}},i,t)}));return function(t){return i.apply(this,arguments)}}())}},{key:"updateScoreBoard",value:function(){var t=this,e=document.querySelector(".js-score-container");e.innerHTML="";var n=document.createElement("div");n.setAttribute("class","score-tab");var i=document.createElement("div");i.setAttribute("class","score-list"),Object.keys(z).forEach(function(e){var r=document.createElement("div");r.innerHTML=z[e],r.setAttribute("class","score-tab-item"),n.appendChild(r);var o=document.createElement("ul"),s=t.scores[e],a=document.createElement("li"),l=document.createElement("div");l.setAttribute("class","index"),l.innerHTML="",a.appendChild(l),k.forEach(function(t){var e=document.createElement("div");e.setAttribute("class",t),e.innerHTML=t,a.appendChild(e)}),o.appendChild(a),s.forEach(function(t,e){var n=document.createElement("li"),i=document.createElement("div");i.setAttribute("class","index"),i.innerHTML=e+1,n.appendChild(i),k.forEach(function(e){var i=document.createElement("div");i.setAttribute("class",e),"time"===e?i.innerHTML=(0,y.formatTime)(t[e]):"timestamp"===e?i.innerHTML=t[e]:i.innerHTML=t[e],n.appendChild(i)}),o.appendChild(n)}),i.appendChild(o)}),e.appendChild(n),e.appendChild(i);var r=Array.from(n.children),o=Array.from(i.children);r.forEach(function(t,e){0===e&&(t.setAttribute("data-active",""),o.forEach(function(t){t.style.display="none"}),o[e].style.display="block"),t.addEventListener(c.browserEvents.CLICK,function(n){n.stopPropagation(),t.hasAttribute("data-active")||(r.forEach(function(t){t.removeAttribute("data-active")}),t.setAttribute("data-active",""),o.forEach(function(t){t.style.display="none"}),o[e].style.display="block")})})}}]),t}();e.default=_},"./src/main/puzzle/buttons.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("./src/main/configs.js"),s=function(){function t(e){var n=e.ctx;i(this,t),this.ctx=n,this.buttons=[{text:"Scramble",disabled:!0,type:o.buttonTypes.SCRAMBLE},{text:"Scores",disabled:!1,type:o.buttonTypes.SHOW_SCORE}]}return r(t,[{key:"enable",value:function(t){return this.buttons.map(function(e){return!!t.includes(e.type)&&(e.disabled=!1,!0)})}},{key:"hitButton",value:function(t){var e=t.x,n=t.y,i=(o.buttonAreaWidth+o.buttonSpacing)/this.buttons.length-o.buttonSpacing,r=this.buttons.find(function(t,r){var s=o.buttonAreaLeft+r*(i+o.buttonSpacing);return e>s&&e<s+i&&n>o.buttonAreaTop&&n<o.buttonAreaTop+o.buttonAreaHeight&&!t.disabled&&(t.disabled=!0,!0)});return r?r.type:null}},{key:"render",value:function(){var t=this.ctx,e=(o.buttonAreaWidth+o.buttonSpacing)/this.buttons.length-o.buttonSpacing;this.buttons.forEach(function(n,i){var r=o.buttonAreaLeft+i*(e+o.buttonSpacing);t.fillStyle=n.disabled?o.buttonDisabledBackgroundColor:o.buttonBackgroundColor,t.fillRect(r,o.buttonAreaTop,e,o.buttonAreaHeight),t.font="48px serif",t.textAlign="center",t.textBaseline="middle",t.fillStyle=o.buttonTextColor,t.fillText(n.text,r+e/2,o.buttonAreaTop+o.buttonAreaHeight/2)})}}]),t}();e.default=s},"./src/main/puzzle/grid.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("./src/main/configs.js"),s=function(){function t(e){var n=e.ctx;i(this,t),this.ctx=n,this.x=o.gridX,this.y=o.gridY,this.width=this.height=o.gridSize,this.borderWidth=o.gridBorderWidth,this.strokeStyle=o.gridBorderColor,this.fillStyle=o.gridBackgroundColor}return r(t,[{key:"render",value:function(){var t=this.ctx,e=this.strokeStyle,n=this.fillStyle,i=this.borderWidth,r=this.x,o=this.y,s=this.width,a=this.height;i&&(t.strokeStyle=e,t.lineWidth=i,t.strokeRect(r,o,s,a)),t.fillStyle=n,t.fillRect(r,o,s,a)}}]),t}();e.default=s},"./src/main/puzzle/stepper.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("./src/main/configs.js"),s=function(){function t(e){var n=e.ctx;i(this,t),this.ctx=n,this.steps=0}return r(t,[{key:"render",value:function(){var t=this.ctx;t.font=o.stepperFontSize+"px/"+o.stepperHeight+"px serif",t.textAlign="right",t.textBaseline="middle",t.fillStyle=o.stepperFontColor,t.fillText(String(this.steps),o.stepperLeft+o.stepperWidth,o.stepperTop+o.stepperHeight/2)}},{key:"reset",value:function(){this.steps=0}},{key:"update",value:function(){this.steps+=1}},{key:"getSteps",value:function(){return this.steps}}]),t}();e.default=s},"./src/main/puzzle/tile.js":function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n("./node_modules/bezier-easing/src/index.js"),a=i(s),l=n("./src/main/configs.js"),u=function(){function t(e){var n=e.ctx,i=e.width,o=e.height,s=e.text,u=e.type,c=e.rowIndex,d=e.colIndex,f=e.deltaX,h=void 0===f?0:f,p=e.deltaY,v=void 0===p?0:p;r(this,t),this.ctx=n,this.width=i,this.height=o,this.borderWidth=l.tileBorderWidth,this.strokeStyle=l.tileBorderColor,this.text=s,this.type=u,this.rowIndex=c,this.colIndex=d,this.deltaX=h,this.deltaY=v,this.fillStyle=l.tileColors[Math.min(c,d)],this.easing=(0,a.default)(.2,0,0,1),this.animationDuration=100}return o(t,[{key:"renderSpaceTile",value:function(){var t=this.ctx,e=this.fillStyle,n=this.borderWidth,i=this.width,r=this.height,o=this.rowIndex,s=this.colIndex,a=this.deltaX,u=this.deltaY,c=(0,l.getTilePosition)({colIndex:s,rowIndex:o}),d=c.x,f=c.y;t.fillStyle=e,t.fillRect(d+a,f+u,i,r),n&&(t.lineWidth=n,t.strokeStyle=strokeStyle,t.strokeRect(d,f,i,r))}},{key:"renderNormalTile",value:function(){var t=this.ctx,e=this.strokeStyle,n=this.fillStyle,i=this.borderWidth,r=this.width,o=this.height,s=this.text,a=this.rowIndex,u=this.colIndex,c=this.deltaX,d=this.deltaY,f=(0,l.getTilePosition)({colIndex:u,rowIndex:a}),h=f.x,p=f.y;t.fillStyle=n,t.fillRect(h+c,p+d,r,o),i&&(t.lineWidth=i,t.strokeStyle=e,t.strokeRect(h,p,r,o)),t.font="48px serif",t.textAlign="center",t.textBaseline="middle",t.fillStyle=l.tileTextColor,t.fillText(s,h+c+r/2,p+d+o/2)}},{key:"render",value:function(){var t=this.type;return t===l.tileTypes.SPACE?this.renderSpaceTile():this.renderNormalTile()}},{key:"update",value:function(){this.updateDeltaAnimation()}},{key:"animateToResetPosition",value:function(){this.animationStartTime=(0,l.getNow)(),this.animationStartDeltaX=this.deltaX,this.animationStartDeltaY=this.deltaY,this.animationStartWidth=this.width,this.animationStartHeight=this.height}},{key:"updateDeltaAnimation",value:function(){if(this.animationStartTime){var t=((0,l.getNow)()-this.animationStartTime)/this.animationDuration;this.deltaX=this.animationStartDeltaX*(1-this.easing(t)),this.deltaY=this.animationStartDeltaY*(1-this.easing(t)),t>=1&&(this.deltaX=0,this.deltaY=0,this.animationStartTime=null,this.animationStartDeltaX=null,this.animationStartDeltaY=null,this.animationStartWidth=null,this.animationStartHeight=null)}}}]),t}();e.default=u},"./src/main/puzzle/timer.js":function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.formatTime=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("./src/main/configs.js"),s=function(t,e){for(;e-t.length>0;)t="0"+t;return t},a=e.formatTime=function(t){var e=t%1e3,n=(t-e)/1e3%60,i=((t-e)/1e3-n)/60;return i+":"+s(String(n),2)+"."+s(String(e),3)},l=function(){function t(e){var n=e.ctx;i(this,t),this.ctx=n,this.time=0,this.startingTime=null}return r(t,[{key:"render",value:function(){var t=this.ctx;t.font=o.timerFontSize+"px/"+o.timerHeight+"px serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=o.timerFontColor,t.fillText(a(this.time),o.timerLeft,o.timerTop+o.timerHeight/2)}},{key:"start",value:function(){this.startingTime||(this.time=0,this.startingTime=(0,o.getNow)())}},{key:"stop",value:function(){this.startingTime=null}},{key:"reset",value:function(){this.time=0,this.startingTime=null}},{key:"update",value:function(){this.startingTime&&(this.time=(0,o.getNow)()-this.startingTime)}},{key:"getTime",value:function(){return this.time}}]),t}();e.default=l},"./src/styles/index.pcss":function(t,e,n){var i=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss");"string"==typeof i&&(i=[[t.i,i,""]]);n("./node_modules/style-loader/addStyles.js")(i,{});i.locals&&(t.exports=i.locals)},0:function(t,e,n){t.exports=n("./src/entries/index.js")}},[0]);
//# sourceMappingURL=index.js.map