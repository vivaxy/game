/*! @2017 vivaxy */
webpackJsonp([0],{"./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss":function(e,t,n){t=e.exports=n("./node_modules/css-loader/lib/css-base.js")(),t.push([e.i,"/**\n * @since 2017-02-20 10:27\n * @author vivaxy\n */\n\n:root {\n}\n\nhtml {\n    height: 100%;\n}\n\nbody {\n    margin: 0;\n    height: 100%;\n    position: relative;\n    background-color: rgb(90, 90, 90);\n}\n\ncanvas {\n    position: absolute;\n    max-width: 100%;\n    max-height: 100%;\n    display: block;\n    top: 50%;\n    left: 50%;\n    -webkit-transform: translate3d(-50%, -50%, 0);\n            transform: translate3d(-50%, -50%, 0);\n    background-color: #ffffff;\n}\n",""])},"./node_modules/css-loader/lib/css-base.js":function(e,t,n){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},"./node_modules/eventemitter3/index.js":function(e,t,n){"use strict";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new r(n,i||e,o),a=u?u+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],s]:e._events[a].push(s):(e._events[a]=s,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function a(){this._events=new i,this._eventsCount=0}var c=Object.prototype.hasOwnProperty,u="~";Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(u=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)c.call(e,t)&&n.push(u?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=u?u+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,o=new Array(r);i<r;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=u?u+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,r,o){var s=u?u+e:e;if(!this._events[s])return!1;var a,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,o),!0}for(c=1,a=new Array(f-1);c<f;c++)a[c-1]=arguments[c];l.fn.apply(l.context,a)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,i);break;default:if(!a)for(h=1,a=new Array(f-1);h<f;h++)a[h-1]=arguments[h];l[c].fn.apply(l[c].context,a)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,i){var r=u?u+e:e;if(!this._events[r])return this;if(!t)return s(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,r);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==t||i&&!o[a].once||n&&o[a].context!==n)&&c.push(o[a]);c.length?this._events[r]=1===c.length?c[0]:c:s(this,r)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=u?u+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=u,a.EventEmitter=a,e.exports=a},"./node_modules/style-loader/addStyles.js":function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=h[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(c(i.parts[o],t))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(c(i.parts[o],t));h[i.id]={id:i.id,refs:1,parts:s}}}}function i(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],o=r[0],s=r[1],a=r[2],c=r[3],u={css:s,media:a,sourceMap:c};n[o]?n[o].parts.push(u):t.push(n[o]={id:o,parts:[u]})}return t}function r(e,t){var n=p(),i=b[b.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function a(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var n,i,r;if(t.singleton){var c=m++;n=y||(y=s(t)),i=u.bind(null,n,c,!1),r=u.bind(null,n,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(t),i=f.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=l.bind(null,n),r=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function u(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function l(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,i=t.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var h={},d=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=d(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=d(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,m=0,b=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=v()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var r=i(e);return n(r,t),function(e){for(var o=[],s=0;s<r.length;s++){var a=r[s],c=h[a.id];c.refs--,o.push(c)}if(e){var u=i(e);n(u,t)}for(var s=0;s<o.length;s++){var c=o[s];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete h[c.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},"./src/entries/index.js":function(e,t,n){"use strict";n("./src/main/index.js")},"./src/main/canvas.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("./src/main/configs.js"),s=function(){function e(){i(this,e);var t=document.querySelector(".js-canvas");this.canvas=t,this.ctx=t.getContext("2d"),this.width=o.canvasWidth,this.height=o.canvasHeight,t.width=o.canvasWidth,t.height=o.canvasHeight}return r(e,[{key:"getCtx",value:function(){return this.ctx}},{key:"getCanvas",value:function(){return this.canvas}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width,this.height)}}]),e}();t.default=s},"./src/main/configs.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.canvasWidth=900,r=(t.canvasHeight=1600,t.size=4),o=t.gridSize=720,s=t.gridBorderWidth=5,a=t.gridX=(i-o-2*s)/2,c=t.gridY=200,u=(t.gridBorderColor="rgb(0, 255, 0)",t.tileSpacing=5),l=t.tileBorderWidth=5,f=t.tileSize=(o-u*(r+1)-2*s)/r-2*l;t.tileBorderColor="rgb(255, 0, 0)",t.getTilePosition=function(e){var t=e.rowIndex,n=e.colIndex,i=f+2*l,r=f+2*l,o=a+(n+1)*u+l+i*n+s,h=c+(t+1)*u+l+r*t+s;return{x:o,y:h}},t.tileTypes={SPACE:0,NORMAL:1},t.movementThreshold=window.innerWidth/i*(f+u+2*l)/2,t.directions={LEFT:0,UP:1,RIGHT:2,DOWN:3},t.events={MOVE:"MOVE"},t.browserEvents={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel"}},"./src/main/index.js":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n("./src/styles/index.pcss");var s=n("./src/main/configs.js"),a=n("./src/main/canvas.js"),c=i(a),u=n("./src/main/puzzle.js"),l=i(u),f=n("./src/main/input.js"),h=i(f),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.row,i=void 0===n?4:n,o=t.col,a=void 0===o?4:o;r(this,e);var u=new c.default,f=new h.default({canvas:u.getCanvas()}),d=new l.default({ctx:u.getCtx(),row:i,col:a,input:f});this.canvas=u,this.puzzle=d,document.body.addEventListener(s.browserEvents.TOUCH_MOVE,function(e){e.preventDefault()},{passive:!1})}return o(e,[{key:"render",value:function(){var e=this.puzzle,t=this.canvas;t.clear(),e.render()}},{key:"loop",value:function(){var e=this;this.render(),requestAnimationFrame(function(){e.loop()})}},{key:"start",value:function(){this.loop()}}]),e}();(new d).start()},"./src/main/input.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n("./node_modules/eventemitter3/index.js"),c=n("./src/main/configs.js"),u={TOUCH_UP:0,TOUCH_DOWN:1},l=function(e){return e.changedTouches?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY}},f=function(e){function t(e){var n=e.canvas;i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.start=function(e){o.inputStatus=u.TOUCH_DOWN;var t=l(e);o.resetPoint(t)},o.move=function(e){var t=l(e);o.pointX=t.x,o.pointY=t.y,o.tryMove()},o.end=function(e){o.inputStatus=u.TOUCH_UP,o.resetPoint(o.invalidPoint)},o.canvas=n,o.inputStatus=u.TOUCH_UP,o.inverse=!0,o.invalidPoint={x:null,y:null},o.resetPoint(o.invalidPoint),o.initialize(),o}return o(t,e),s(t,[{key:"initialize",value:function(){var e=this.canvas;e.addEventListener(c.browserEvents.TOUCH_START,this.start,{passive:!0}),e.addEventListener(c.browserEvents.TOUCH_MOVE,this.move,{passive:!0}),e.addEventListener(c.browserEvents.TOUCH_END,this.end,{passive:!0}),e.addEventListener(c.browserEvents.TOUCH_CANCEL,this.end,{passive:!0})}},{key:"tryMove",value:function(){var e=Math.abs(this.startPointX-this.pointX),t=Math.abs(this.startPointY-this.pointY),n={x:this.pointX,y:this.pointY};e>t?e>c.movementThreshold&&(this.pointX-this.startPointX>0?(this.emit(c.events.MOVE,this.inverse?c.directions.RIGHT:c.directions.LEFT,n),this.resetPoint(n)):(this.emit(c.events.MOVE,this.inverse?c.directions.LEFT:c.directions.RIGHT,n),this.resetPoint(n))):t>c.movementThreshold&&(this.pointY-this.startPointY>0?(this.emit(c.events.MOVE,this.inverse?c.directions.DOWN:c.directions.UP,n),this.resetPoint(n)):(this.emit(c.events.MOVE,this.inverse?c.directions.UP:c.directions.DOWN,n),this.resetPoint(n)))}},{key:"resetPoint",value:function(e){this.startPointX=e.x,this.startPointY=e.y,this.pointX=e.x,this.pointY=e.y}}]),t}(a.EventEmitter);t.default=f},"./src/main/puzzle.js":function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n("./src/main/configs.js"),c=n("./src/main/puzzle/grid.js"),u=i(c),l=n("./src/main/puzzle/tile.js"),f=i(l),h=function(){function e(t){var n=t.ctx,i=t.row,o=t.col,s=t.input;r(this,e),this.ctx=n,this.row=i,this.col=o,this.input=s,this.grid=new u.default({ctx:n}),this.tileList=this.initializeTileList(),this.initializeInput()}return s(e,[{key:"initializeInput",value:function(){var e=this;this.input.on(a.events.MOVE,function(t,n){e.move(t,n)})}},{key:"initializeTileList",value:function(){var e=this.ctx,t=this.col,n=this.row,i=a.tileSize,r=a.tileSize;return Array.from({length:n},function(o,s){return Array.from({length:t},function(o,c){return new f.default({ctx:e,width:i,height:r,colIndex:c,rowIndex:s,text:String(s*n+c+1),type:c===t-1&&s===n-1?a.tileTypes.SPACE:a.tileTypes.NORMAL})})})}},{key:"move",value:function(e,t){var n=this.findSpacePosition(),i=n.row,r=n.col;if(e===a.directions.LEFT){if(r<=0)return void this.input.resetPoint(t);var s=this.tileList[i],c=s.splice(r,1),u=o(c,1),l=u[0];s.splice(r-1,0,l)}else if(e===a.directions.UP){if(i<=0)return void this.input.resetPoint(t);var f=this.tileList[i],h=this.tileList[i-1],d=f.splice(r,1),v=o(d,1),p=v[0],y=h.splice(r,1),m=o(y,1),b=m[0];f.splice(r,0,b),h.splice(r,0,p)}else if(e===a.directions.RIGHT){if(r>=this.col-1)return void this.input.resetPoint(t);var g=this.tileList[i],x=g.splice(r,1),w=o(x,1),_=w[0];g.splice(r+1,0,_)}else{if(e!==a.directions.DOWN)throw new Error("unexpected direction: "+e);if(i>=this.row-1)return void this.input.resetPoint(t);var O=this.tileList[i],j=this.tileList[i+1],T=O.splice(r,1),C=o(T,1),E=C[0],P=j.splice(r,1),k=o(P,1),S=k[0];O.splice(r,0,S),j.splice(r,0,E)}}},{key:"findSpacePosition",value:function(){var e=this.tileList;return e.reduce(function(e,t,n){var i=t.reduce(function(e,t,n){return t.type===a.tileTypes.SPACE?n:null===e?null:e},null);return null!==i?{row:n,col:i}:e},{col:null,row:null})}},{key:"render",value:function(){var e=this.grid,t=this.tileList;e.render(),t.map(function(e,t){return e.map(function(e,n){return e.render({rowIndex:t,colIndex:n})})})}}]),e}();t.default=h},"./src/main/puzzle/grid.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("./src/main/configs.js"),s=function(){function e(t){var n=t.ctx;i(this,e),this.ctx=n,this.x=o.gridX,this.y=o.gridY,this.width=this.height=o.gridSize,this.borderWidth=o.gridBorderWidth,this.strokeStyle=o.gridBorderColor}return r(e,[{key:"render",value:function(){var e=this.ctx,t=this.strokeStyle,n=this.borderWidth,i=this.x,r=this.y,o=this.width,s=this.height;e.strokeStyle=t,e.lineWidth=n,e.strokeRect(i,r,o,s)}}]),e}();t.default=s},"./src/main/puzzle/tile.js":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n("./src/main/configs.js"),s=function(){function e(t){var n=t.ctx,r=t.width,s=t.height,a=t.text,c=t.type;i(this,e),this.ctx=n,this.width=r,this.height=s,this.borderWidth=o.tileBorderWidth,this.strokeStyle=o.tileBorderColor,this.text=a,this.type=c}return r(e,[{key:"renderSpaceTile",value:function(e){e.rowIndex,e.colIndex}},{key:"renderNormalTile",value:function(e){var t=e.rowIndex,n=e.colIndex,i=this.ctx,r=this.strokeStyle,s=this.borderWidth,a=this.width,c=this.height,u=this.text,l=(0,o.getTilePosition)({colIndex:n,rowIndex:t}),f=l.x,h=l.y;i.fillStyle="#000",i.strokeStyle=r,i.lineWidth=s,i.fillRect(f,h,a,c),i.font="48px serif",i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff",i.fillText(u,f+a/2,h+c/2)}},{key:"render",value:function(e){var t=e.rowIndex,n=e.colIndex,i=this.type;return i===o.tileTypes.SPACE?this.renderSpaceTile({rowIndex:t,colIndex:n}):this.renderNormalTile({rowIndex:t,colIndex:n})}}]),e}();t.default=s},"./src/styles/index.pcss":function(e,t,n){var i=n("./node_modules/css-loader/index.js!./node_modules/postcss-loader/index.js?{}!./src/styles/index.pcss");"string"==typeof i&&(i=[[e.i,i,""]]);n("./node_modules/style-loader/addStyles.js")(i,{});i.locals&&(e.exports=i.locals)},0:function(e,t,n){e.exports=n("./src/entries/index.js")}},[0]);
//# sourceMappingURL=index.js.map